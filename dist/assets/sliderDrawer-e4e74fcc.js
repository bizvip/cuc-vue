import{d as j}from"./doc-115f6d3a.js";import{c as E}from"./common-5d647e0d.js";import K from"./simRequest-f2b31fcf.js";import{r as _,v as I,i as r,o,j as u,k as e,s as t,u as m,p as a,a as R,c,F as v,L as N,l as T}from"./runtime-core.esm-bundler-0dd628d9.js";import"./request-7ebe3d6d.js";import"./index-2e3b1493.js";import"./common-782ee753.js";const S={class:"pl-2 pr-2"},$={key:0},z={key:1},X={__name:"sliderDrawer",setup(G,{expose:h}){const f=_(!1),d=_({}),w=_("paramsList"),y=_([]),k=_([]),b=_([]),D=I([{title:"参数名",dataIndex:"name"},{title:"数据类型",dataIndex:"data_type",slotName:"dataType"},{title:"是否必填",dataIndex:"is_required",slotName:"required"},{title:"默认值",dataIndex:"default_value"}]),L=I([{title:"参数名",dataIndex:"name"},{title:"数据类型",dataIndex:"data_type",slotName:"dataType"},{title:"更新时间",dataIndex:"updated_at"}]),B=async p=>{d.value=p,await V();const l=await E.getDict("api_data_type");y.value=l.data,f.value=!0},V=async()=>{const p=await j.getColumnList(d.value.id);k.value=[],b.value=[],p.data.api_column.map(l=>{l.type===1?k.value.push(l):b.value.push(l)})};return h({open:B}),(p,l)=>{const x=r("a-divider"),g=r("a-descriptions-item"),s=r("a-tag"),A=r("a-descriptions"),q=r("a-table"),C=r("a-tab-pane"),F=r("a-tabs"),U=r("a-drawer");return o(),u(U,{visible:f.value,"onUpdate:visible":l[1]||(l[1]=n=>f.value=n),width:"700px",footer:!1},{title:e(()=>[t(m(d.value.name),1)]),default:e(()=>[a(F,{type:"rounded","active-key":w.value,"onUpdate:activeKey":l[0]||(l[0]=n=>w.value=n)},{default:e(()=>[a(C,{key:"paramsList",title:"参数列表"},{default:e(()=>[R("div",S,[a(x,{orientation:"left"},{default:e(()=>[t("接口信息")]),_:1}),a(A,{column:1,bordered:""},{default:e(()=>[a(g,{label:"接口地址"},{default:e(()=>[t("/api/v1/"+m(d.value.access_name),1)]),_:1}),a(g,{label:"认证模式"},{default:e(()=>[d.value.auth_mode===1?(o(),u(s,{key:0,color:"green",bordered:""},{default:e(()=>[t("简易模式")]),_:1})):(o(),u(s,{key:1,color:"red",bordered:""},{default:e(()=>[t("复杂模式")]),_:1}))]),_:1}),a(g,{label:"认证说明"},{default:e(()=>[d.value.auth_mode===1?(o(),c("div",$,[t(" 简易模式下，只需要在接口后面带上 "),a(s,{color:"orangered"},{default:e(()=>[t("app_id")]),_:1}),t(" 和"),a(s,{color:"orangered"},{default:e(()=>[t("identity")]),_:1})])):(o(),c("div",z,[t(" 复杂模式下，先需要获取 "),a(s,{color:"blue"},{default:e(()=>[t("AccessToken")]),_:1}),t("，再以此请求接口 ")]))]),_:1})]),_:1}),a(x,{orientation:"left"},{default:e(()=>[t("请求参数")]),_:1}),a(q,{data:k.value,columns:D},{dataType:e(({record:n})=>[(o(!0),c(v,null,N(y.value,i=>(o(),c(v,{key:i.id},[i.key==n.data_type?(o(),u(s,{key:0,color:"blue"},{default:e(()=>[t(m(i.title),1)]),_:2},1024)):T("",!0)],64))),128))]),required:e(({record:n})=>[n.is_required===1?(o(),u(s,{key:0,color:"red"},{default:e(()=>[t("是")]),_:1})):(o(),u(s,{key:1,color:"green"},{default:e(()=>[t("否")]),_:1}))]),_:1},8,["data","columns"]),a(x,{orientation:"left"},{default:e(()=>[t("响应参数")]),_:1}),a(q,{data:b.value,columns:L},{dataType:e(({record:n})=>[(o(!0),c(v,null,N(y.value,i=>(o(),c(v,{key:i.id},[i.key==n.data_type?(o(),u(s,{key:0,color:"blue"},{default:e(()=>[t(m(i.title),1)]),_:2},1024)):T("",!0)],64))),128))]),_:1},8,["data","columns"])])]),_:1}),a(C,{key:"simRequest",title:"模拟请求"},{default:e(()=>[a(K,{row:d.value},null,8,["row"])]),_:1})]),_:1},8,["active-key"])]),_:1},8,["visible"])}}};export{X as default};
