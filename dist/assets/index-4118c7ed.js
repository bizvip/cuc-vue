import{d as t}from"./dept-4a9ab04b.js";import b from"./leader-a7831024.js";import{$ as i}from"./request-372f441e.js";import{r as l,v as p,i as o,o as I,c as C,p as n,k as c,s as D}from"./runtime-core.esm-bundler-0dd628d9.js";const R={class:"ma-content-block lg:flex justify-between pt-4 pl-2 pr-2 pb-2"},T={name:"system:dept"},B=Object.assign(T,{setup(V){const m=l(),u=l(),h=async(e,r)=>{const a=await t.changeStatus({id:r,status:e});a.success&&i.success(a.message)},f=async(e,r)=>{const a=await t.numberOperation({id:r,numberName:"sort",numberValue:e});a.success&&i.success(a.message)},_=e=>{u.value.open(e)},y=p({api:t.getList,recycleApi:t.getRecycleList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationWidth:220,add:{show:!0,api:t.save,auth:["system:dept:save"]},edit:{show:!0,api:t.update,auth:["system:dept:update"]},delete:{show:!0,api:t.deletes,auth:["system:dept:delete"],realApi:t.realDeletes,realAuth:["system:dept:realDeletes"]},recovery:{show:!0,api:t.recoverys,auth:["system:dept:recovery"]},isExpand:!0}),x=p([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"上级部门",dataIndex:"parent_id",hide:!0,formType:"tree-select",dict:{url:"system/dept/tree"},editDefaultValue:e=>e.parent_id==0?void 0:e.parent_id},{title:"部门名称",dataIndex:"name",search:!0,width:150,commonRules:[{required:!0,message:"部门名称必填"}]},{title:"负责人",dataIndex:"leader",search:!0,width:120},{title:"手机",dataIndex:"phone",search:!0,width:150,commonRules:[{match:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码"}]},{title:"排序",dataIndex:"sort",formType:"input-number",addDefaultValue:1,width:180,min:0,max:1e3},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",width:120},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return(e,r)=>{const a=o("a-input-number"),w=o("a-switch"),g=o("icon-user"),k=o("a-link"),v=o("ma-crud");return I(),C("div",R,[n(v,{options:y,columns:x,ref_key:"crudRef",ref:m},{sort:c(({record:s})=>[n(a,{"default-value":s.sort,mode:"button",onChange:d=>f(d,s.id),min:0,max:1e3},null,8,["default-value","onChange"])]),status:c(({record:s})=>[n(w,{"checked-value":1,"unchecked-value":"2",onChange:d=>h(d,s.id),"default-checked":s.status==1},null,8,["onChange","default-checked"])]),operationBeforeExtend:c(({record:s})=>[n(k,{onClick:d=>_(s)},{default:c(()=>[n(g),D(" 领导列表")]),_:2},1032,["onClick"])]),_:1},8,["options","columns"]),n(b,{ref_key:"leaderRef",ref:u},null,512)])}}});export{B as default};
