import{d as j}from"./doc-fd9086fd.js";import{i as G}from"./index-4717f23d.js";import{a0 as y,a2 as N,$ as b}from"./request-372f441e.js";import{g as x}from"./common-baf76827.js";import R from"./globalParams-0cb866d0.js";import V from"./sliderDrawer-9ac40044.js";import{r as w,c as v,a as c,u as h,p as t,k as e,i as u,o as n,s as o,F as C,L as z,j as _,l as f}from"./runtime-core.esm-bundler-0dd628d9.js";import"./common-fa9d7b0c.js";import"./simRequest-bea93e59.js";const M={class:"work-area p-5"},O={class:"ma-content-block shadow p-5"},F={class:"text-2xl"},H={class:"mt-2"},U=["innerHTML"],J={class:"ma-content-block shadow p-5 mt-5"},K=c("div",{class:"mt-5"},null,-1),le={__name:"interfaceList",setup(Q){const i=G(),m=w({}),T=w(),I=w(),P=async()=>{const l=await j.getAppAndInterfaceList(i.appId);m.value=l.data},q=async()=>{const l=y.md5(i.appId+i.appSecret);await x(l)},B=()=>{let l=Date.now(),s={app_id:i.appId,timestamp:l,app_secret:i.appSecret,sign_ver:"1.0"},p=Object.keys(s).sort((a,g)=>a<g?1:a>g?-1:0),d={};for(let a=0;a<p.length;a++)d[p[a]]=s[p[a]];let k=y.md5(y.httpBuild(d));return{app_id:i.appId,signature:k,timestamp:l}},$=()=>{const l="/api/v1/getAccessToken?"+y.httpBuild(B());N({url:l,method:"post"}).then(async s=>{s.success?await x(s.data.access_token):b.error(s.message)}).catch(s=>{b.error(s)})},D=()=>{i.globalParams=void 0,b.success("清除成功")};return P(),(l,s)=>{const p=u("a-divider"),d=u("a-button"),k=u("a-space"),a=u("a-tag"),g=u("a-tooltip"),L=u("a-collapse-item"),S=u("a-collapse");return n(),v("div",M,[c("div",O,[c("div",F,h(m.value.app_name),1),c("div",H,[t(p,{orientation:"left"},{default:e(()=>[o("最后更新时间")]),_:1}),c("p",null,h(m.value.updated_at),1),t(p,{orientation:"left"},{default:e(()=>[o("应用介绍")]),_:1}),c("div",{class:"description",innerHTML:m.value.description},null,8,U)])]),c("div",J,[t(k,{class:"mb-5"},{default:e(()=>[t(d,{type:"primary",onClick:s[0]||(s[0]=()=>T.value.open())},{default:e(()=>[o("设置全局参数")]),_:1}),t(d,{type:"primary",status:"danger",onClick:D},{default:e(()=>[o("清除全局参数")]),_:1}),t(d,{type:"primary",status:"warning",onClick:q},{default:e(()=>[o("生成简易模式 Identity")]),_:1}),t(d,{type:"primary",status:"warning",onClick:$},{default:e(()=>[o("生成复杂模式 AccessToken")]),_:1})]),_:1}),t(S,{"default-active-key":["1"],"expand-icon-position":"right"},{default:e(()=>[(n(!0),v(C,null,z(m.value.apiGroup,(A,E)=>(n(),_(L,{header:A.name,key:(E+1).toString()},{default:e(()=>[t(S,{"expand-icon-position":"right"},{default:e(()=>[(n(!0),v(C,null,z(m.value.apis,(r,W)=>(n(),v(C,null,[r.group_id==A.id?(n(),_(L,{key:0,header:r.name},{default:e(()=>[t(k,{size:"large"},{default:e(()=>[t(g,{content:"点击复制"},{default:e(()=>[t(a,{color:"arcoblue",bordered:"",class:"cursor-pointer",size:"large",onClick:X=>l.$common.copy(`/api/v1/${r.access_name}`)},{default:e(()=>[o(" /api/v1/"+h(r.access_name),1)]),_:2},1032,["onClick"])]),_:2},1024),t(g,{content:"允许请求的方式"},{default:e(()=>[r.request_mode==="A"?(n(),_(a,{key:0,color:"green",size:"large",bordered:""},{default:e(()=>[o("ALL")]),_:1})):f("",!0),r.request_mode==="G"?(n(),_(a,{key:1,color:"cyan",size:"large",bordered:""},{default:e(()=>[o("GET")]),_:1})):f("",!0),r.request_mode==="P"?(n(),_(a,{key:2,color:"pinkpurple",size:"large",bordered:""},{default:e(()=>[o("POST")]),_:1})):f("",!0),r.request_mode==="U"?(n(),_(a,{key:3,color:"red",size:"large",bordered:""},{default:e(()=>[o("PUT")]),_:1})):f("",!0),r.request_mode==="D"?(n(),_(a,{key:4,color:"orangered",size:"large",bordered:""},{default:e(()=>[o("DELETE")]),_:1})):f("",!0)]),_:2},1024),t(d,{type:"primary",onClick:()=>I.value.open(r)},{default:e(()=>[o("测试接口 / 查看详情")]),_:2},1032,["onClick"])]),_:2},1024),K,c("div",null,[t(p,{orientation:"left"},{default:e(()=>[o("最后更新时间")]),_:1}),c("p",null,h(r.updated_at),1)])]),_:2},1032,["header"])):f("",!0)],64))),256))]),_:2},1024)]),_:2},1032,["header"]))),128))]),_:1})]),t(R,{ref_key:"globalParamsRef",ref:T},null,512),t(V,{ref_key:"sliderRef",ref:I},null,512)])}}};export{le as default};
