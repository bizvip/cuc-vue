import{a as s}from"./dict-895e2bfe.js";import{$ as p}from"./request-7ebe3d6d.js";import{r as l,v as h,i,o as k,j as I,k as n,s as C,u as R,p as c}from"./runtime-core.esm-bundler-0dd628d9.js";const V={__name:"dataList",setup(q,{expose:f}){const m=l(),d=l(!1),u=l({id:void 0,name:void 0}),v=async(e,a)=>{const t=await s.changeStatus({id:a,status:e});t.success&&p.success(t.message)},y=async(e,a)=>{const t=await s.numberOperation({id:a,numberName:"sort",numberValue:e});t.success&&p.success(t.message)},_=e=>{u.value=e,m.value.requestData(),d.value=!0},D=h({autoRequest:!1,api:s.getPageList,recycleApi:s.getRecyclePageList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationWidth:160,beforeAdd:e=>{var a,t;e.code=(a=u.value)==null?void 0:a.code,e.type_id=(t=u.value)==null?void 0:t.id},add:{show:!0,api:s.saveDictData,auth:["system:dict:save"]},edit:{show:!0,api:s.updateDictData,auth:["system:dict:update"]},delete:{show:!0,api:s.deletesDictData,auth:["system:dict:delete"],realApi:s.realDeletesDictData,realAuth:["system:dict:realDeletes"]},recovery:{show:!0,api:s.recoverysDictData,auth:["system:dict:recovery"]},beforeRequest:e=>e.type_id=u.value.id}),g=h([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"字典标签",dataIndex:"label",search:!0,width:220,commonRules:[{required:!0,message:"字典标签必填"}]},{title:"字典键值",dataIndex:"value",search:!0,width:220,commonRules:[{required:!0,message:"字典键值必填"}]},{title:"排序",dataIndex:"sort",formType:"input-number",addDefaultValue:1,width:180,min:0,max:1e3},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",width:180},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return f({open:_}),(e,a)=>{const t=i("a-input-number"),w=i("a-switch"),x=i("ma-crud"),b=i("a-modal");return k(),I(b,{visible:d.value,"onUpdate:visible":a[0]||(a[0]=o=>d.value=o),fullscreen:"",footer:!1},{title:n(()=>[C("维护 "+R(u.value.name)+" 字典数据",1)]),default:n(()=>[c(x,{options:D,columns:g,ref_key:"crudRef",ref:m},{sort:n(({record:o})=>[c(t,{"default-value":o.sort,mode:"button",onChange:r=>y(r,o.id),min:0,max:1e3},null,8,["default-value","onChange"])]),status:n(({record:o})=>[c(w,{"checked-value":1,"unchecked-value":"2",onChange:r=>v(r,o.id),"default-checked":o.status==1},null,8,["onChange","default-checked"])]),_:1},8,["options","columns"])]),_:1},8,["visible"])}}};export{V as default};
