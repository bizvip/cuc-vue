import{i as G}from"./index-2e3b1493.js";import{f as N}from"./common-782ee753.js";import{$ as L,a2 as A}from"./request-7ebe3d6d.js";import{r as y,v as H,w as J,i as n,o as K,c as M,p as e,k as a,s as _,a as h}from"./runtime-core.esm-bundler-0dd628d9.js";const Q={class:"pl-2 pr-2"},R=h("div",{class:"mr-3 w-28"},"请求地址",-1),z={class:"pl-2 pr-2"},F={class:"pl-2 pr-2"},I={class:"pl-2 pr-2"},ee={__name:"simRequest",props:{row:Object},setup($){var P,O;const k=$,U=G(),w=y(""),v=y("query"),x=y([{label:"所有模式",value:"A"},{label:"GET",value:"G"},{label:"POST",value:"P"},{label:"PUT",value:"U"},{label:"DELETE",value:"D"}]),r=H({header:[],query:[],body:[]}),g=()=>{r[v.value].push({name:"",value:""})},q=o=>{r[v.value].splice(o,1)},s=y({mode:(P=k.row)==null?void 0:P.request_mode,url:`/api/v1/${(O=k.row)==null?void 0:O.access_name}`}),B=async()=>{var V,b,p;if(s.value.url===""){L.info("请输入请求地址");return}let o;switch(s.value.mode){case"P":{o="POST";break}case"D":{o="DELETE";break}case"U":{o="PUT";break}default:o="GET"}let d={},f={},c={};r.header.map(u=>{d[u.name]=u.value}),r.query.map(u=>{f[u.name]=u.value}),r.body.map(u=>{c[u.name]=u.value});const C={header:Object.assign(d,(V=U.globalParams)==null?void 0:V.header),params:Object.assign(f,(b=U.globalParams)==null?void 0:b.query),data:Object.assign(c,(p=U.globalParams)==null?void 0:p.body),url:s.value.url,method:o},m=await A(C);w.value=N(m)};return J(()=>k.row,o=>{s.value.mode=o==null?void 0:o.request_mode,s.value.url=`/api/v1/${o==null?void 0:o.access_name}`}),(o,d)=>{const f=n("a-select"),c=n("a-input"),C=n("icon-send"),m=n("a-button"),V=n("a-input-group"),b=n("a-form"),p=n("icon-plus"),u=n("icon-delete"),i=n("a-table-column"),T=n("a-table"),E=n("a-tab-pane"),D=n("a-tabs"),S=n("a-divider"),j=n("ma-code-editor");return K(),M("div",Q,[e(b,{model:s.value},{default:a(()=>[e(V,null,{default:a(()=>[R,e(f,{options:x.value,style:{width:"130px"},modelValue:s.value.mode,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value.mode=l)},null,8,["options","modelValue"]),e(c,{modelValue:s.value.url,"onUpdate:modelValue":d[1]||(d[1]=l=>s.value.url=l),placeholder:"请输入接口地址"},null,8,["modelValue"]),e(m,{type:"primary",onClick:B},{default:a(()=>[e(C),_(" 发送请求")]),_:1})]),_:1})]),_:1},8,["model"]),e(D,{"active-key":v.value,"onUpdate:activeKey":d[2]||(d[2]=l=>v.value=l),class:"mt-5"},{default:a(()=>[e(E,{key:"query",title:"设置Query"},{default:a(()=>[h("div",z,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.query,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(E,{key:"body",title:"设置Body"},{default:a(()=>[h("div",F,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.body,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(E,{key:"header",title:"设置Header"},{default:a(()=>[h("div",I,[e(m,{type:"primary",class:"mb-3",onClick:g},{default:a(()=>[e(p),_(" 新增")]),_:1}),e(T,{data:r.header,pagination:!1},{columns:a(()=>[e(i,{title:"#"},{cell:a(({rowIndex:l})=>[e(m,{type:"outline",onClick:t=>q(l)},{icon:a(()=>[e(u)]),_:2},1032,["onClick"])]),_:1}),e(i,{title:"键名",field:"name"},{cell:a(({record:l})=>[e(c,{modelValue:l.name,"onUpdate:modelValue":t=>l.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{title:"值",field:"value"},{cell:a(({record:l})=>[e(c,{modelValue:l.value,"onUpdate:modelValue":t=>l.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["active-key"]),e(S,{orientation:"left"},{default:a(()=>[_("服务器响应")]),_:1}),e(j,{modelValue:w.value,"onUpdate:modelValue":d[3]||(d[3]=l=>w.value=l),height:240,readonly:!0,isBind:!0},null,8,["modelValue"])])}}};export{ee as default};
