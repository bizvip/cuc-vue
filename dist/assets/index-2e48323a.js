import{a2 as l,$ as x}from"./request-372f441e.js";import{r as D,v as i,i as n,o as g,c as k,p as r,k as u,s as T,a as v}from"./runtime-core.esm-bundler-0dd628d9.js";const p={getList(e={}){return l({url:"channel/alert/index",method:"get",params:e})},read(e={}){return l({url:"channel/alert/read",method:"get",data:e})},updateValue(e={}){return l({url:"channel/alert/changeStatus",method:"put",data:e})}},w={class:"ma-content-block lg:flex justify-between pt-4 pl-2 pr-2 pb-2"},I={name:"channel:alert"},C=Object.assign(I,{setup(e){const c=D(),f=(a,o,s)=>{p.updateValue({id:o,name:s,value:a}).then(t=>{t.success&&x.success(t.message),c.value.refresh()}).catch(t=>{console.log(t)})},m=i({id:"cm_channel_alert",rowSelection:!1,pk:"id",operationColumn:!1,operationWidth:160,formOption:{viewType:"modal",width:600},api:p.getList,beforeRequest(a){a.orderBy="id",a.orderType="desc"}}),h=i([{title:"ID",dataIndex:"id",formType:"input",addDisplay:!1,editDisplay:!1},{title:"渠道ID",dataIndex:"channel_id",formType:"input",search:!0,addDisplay:!1,editDisplay:!1},{title:"渠道账号",dataIndex:"channel_account",formType:"input",search:!0,addDisplay:!1,editDisplay:!1},{title:"是否预警",dataIndex:"is_alert",formType:"select",search:!0,addDisplay:!1,commonRules:{required:!0,message:"请输入是否预警"},sortable:{sortDirections:["ascend","descend"],sorter:!0},multiple:!0},{title:"创建时间",dataIndex:"created_at",formType:"date",addDisplay:!1,editDisplay:!1,hide:!0,showTime:!0},{title:"更新时间",dataIndex:"updated_at",formType:"date",addDisplay:!1,editDisplay:!1,showTime:!0}]);return(a,o)=>{const s=n("a-alert"),t=n("a-switch"),_=n("ma-crud");return g(),k("div",null,[r(s,{closable:"",class:"mb-2"},{default:u(()=>[T("【关】代表关闭预警。【开】代表打开预警。预警打开后将看不到数据")]),_:1}),v("div",w,[r(_,{options:m,columns:h,ref_key:"crudRef",ref:c},{is_alert:u(({record:d})=>[r(t,{"default-checked":parseInt(d.is_alert)===1,"checked-text":"开","unchecked-text":"关","checked-value":"1","unchecked-value":"0",onChange:y=>f(y,d.id,"is_alert")},null,8,["default-checked","onChange"])]),_:1},8,["options","columns"])])])}}});export{C as default};
