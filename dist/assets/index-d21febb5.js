var xn=Object.defineProperty;var $n=(o,e,n)=>e in o?xn(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var _e=(o,e,n)=>($n(o,typeof e!="symbol"?e+"":e,n),n);import{b as fe,f as Ne,a as Te,g as sn,c as Oe,e as Et,h as Tn,d as On}from"./index-2e3b1493.js";import{i as In,s as Mn}from"./vue-color-kit-c25d00f1.js";import{_ as at}from"./logo-a60c622a.js";import{i as h,o as v,c as V,p as u,k as d,S as C,s as A,u as E,F as Z,L as Ce,j as $,l as q,r as R,a as x,w as he,z as Ue,e as Fe,m as ie,n as Xe,a_ as ln,aY as rn,C as ot,H as Pe,G as gt,ar as An,v as Nt}from"./runtime-core.esm-bundler-0dd628d9.js";import{a0 as He,$ as un,w as Gt,C as _t,T as Pn}from"./request-7ebe3d6d.js";import{q as Nn}from"./queueMessage-4343c3d7.js";import{_ as je}from"./_plugin-vue_export-helper-c27b6911.js";import{u as Bt}from"./vue-i18n.cjs-61def1cf.js";import{i as Fn,b as Ln,d as Ge,e as qt}from"./common-782ee753.js";import{c as Rn}from"./common-5d647e0d.js";import{u as Vn}from"./user-73ea5d93.js";const Wn={class:"ml-2 mt-3.5 hidden lg:block"},cn={__name:"ma-breadcrumb",setup(o){const e=fe(),n=Ne(),t=Te();return(a,s)=>{const l=h("a-breadcrumb-item"),r=h("a-breadcrumb");return v(),V("div",Wn,[u(r,null,{default:d(()=>[u(l,{class:"cursor-pointer",onClick:s[0]||(s[0]=i=>C(t).push("dashboard"))},{default:d(()=>[A(E(a.$t("menus.dashboard")),1)]),_:1}),(v(!0),V(Z,null,Ce(C(n).matched,(i,c)=>(v(),V(Z,{key:c},[c>0&&!["/","/home","/dashboard"].includes(i.path)?(v(),$(l,{key:0},{default:d(()=>[A(E(C(e).i18n?a.$t("menus."+i.name).indexOf(".")>0?i.meta.title:a.$t("menus."+i.name):i.meta.title),1)]),_:2},1024)):q("",!0)],64))),128))]),_:1})])}}};const Bn={class:"mgs-nfc rounded p-2 shadow-lg"},Hn={class:"flex justify-between",style:{"font-size":"13px"}},zn=["src"],Xn=["innerHTML"],Yn={__name:"message-notification",setup(o){const e=sn(),n=R({}),t=R(!1),a=async s=>{n.value=s,await Nn.updateReadStatus({ids:[s.id]}),e.messageList.find((l,r)=>{l&&s.id==l.id&&e.messageList.splice(r,1)}),t.value=!0};return(s,l)=>{const r=h("a-badge"),i=h("a-avatar"),c=h("a-list-item-meta"),m=h("a-list-item"),f=h("a-list"),p=h("a-empty"),g=h("a-tab-pane"),w=h("a-tabs"),S=h("a-typography-title"),M=h("a-space"),Y=h("a-typography-paragraph"),H=h("a-typography"),K=h("a-modal");return v(),V(Z,null,[x("div",Bn,[u(w,{"default-active-key":"message",type:"rounded"},{default:d(()=>[u(g,{key:"message"},{title:d(()=>[A(E(s.$t("sys.operationMessage.message"))+" ",1),C(e).messageList.length>0?(v(),$(r,{key:0,count:5,dot:"",dotStyle:{width:"5px",height:"5px",top:"-8px"}})):q("",!0)]),default:d(()=>[C(e).messageList.length>0?(v(),$(f,{key:0,"max-height":230,class:"h-full"},{default:d(()=>[(v(!0),V(Z,null,Ce(C(e).messageList,P=>(v(),$(m,{key:P.id,class:"cursor-pointer",onClick:se=>a(P)},{default:d(()=>[u(c,{title:P.title},{description:d(()=>[x("div",Hn,[x("span",null,"发送人："+E(P.send_user.nickname),1),x("span",null,"时间："+E(P.created_at.substr(0,10)),1)])]),avatar:d(()=>[u(i,{shape:"square"},{default:d(()=>[x("img",{alt:"avatar",src:`${P.send_user.avatar?P.send_user.avatar:"/avatar.jpg"}`},null,8,zn)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),128))]),_:1})):(v(),$(p,{key:1,class:"h-full"}))]),_:1}),u(g,{key:"todo"},{title:d(()=>[A(E(s.$t("sys.operationMessage.todo")),1)]),default:d(()=>[u(p,{class:"h-full"})]),_:1})]),_:1})]),u(K,{visible:t.value,"onUpdate:visible":l[0]||(l[0]=P=>t.value=P),fullscreen:"",footer:!1},{title:d(()=>[A("消息详情")]),default:d(()=>[u(H,{style:{marginTop:"-30px"}},{default:d(()=>[u(S,{class:"text-center"},{default:d(()=>{var P;return[A(E((P=n.value)==null?void 0:P.title),1)]}),_:1}),u(Y,{class:"text-right",style:{"font-size":"13px",color:"var(--color-text-3)"}},{default:d(()=>[u(M,{size:"large"},{default:d(()=>{var P;return[x("span",null,"创建时间："+E((P=n.value)==null?void 0:P.created_at),1)]}),_:1})]),_:1}),u(Y,null,{default:d(()=>{var P;return[x("div",{innerHTML:(P=n.value)==null?void 0:P.content},null,8,Xn)]}),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},jn=je(Yn,[["__scopeId","data-v-69ff3978"]]);class Un{constructor(e,n){_e(this,"ws",null);_e(this,"serverUrl");_e(this,"heartbeat",{openHeartbeat:!0,interval:10*1e3,timer:null});_e(this,"reconnectConfig",{isReconnect:!0,timer:null,interval:5*1e3,retry:10});_e(this,"onEvent",[]);_e(this,"events",{onOpen:e=>{},onClose:e=>{},onError:e=>{}});this.serverUrl=e,this.events=Object.assign(this.events,n)}on(e,n){this.onEvent[e]=n}connection(){this.ws&&(this.ws.close(),this.ws=null),this.ws=new WebSocket(this.serverUrl),this.ws.onopen=this.onOpen.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this)}onParseData(e){return JSON.parse(e.data)}onOpen(e){this.events.onOpen(e),this.sendHeartbeat()}onClose(e){clearInterval(this.heaerbeatTimer),e.code==1006&&this.reconnect(),this.events.onClose(e)}onError(e){this.events.onError(e)}onMessage(e){let n=this.onParseData(e);this.onEvent.hasOwnProperty(n.event)&&this.onEvent[n.event](n.message,n.data),this.onEvent.hasOwnProperty(n.event)||console.warn(`WebSocket 消息事件[${n.event}]未绑定...`)}sendHeartbeat(){this.heartbeat.openHeartbeat&&(this.heaerbeat.timer=setInterval(e=>{this.ws.send("PONG")},this.heartbeat.interval))}reconnect(){let e=this.reconnectConfig;!e.isReconnect||e.retry==0||(this.reconnectConfig.isReconnect=!1,e.timer&&clearTimeout(e.timer),this.reconnectConfig.timer=setTimeout(n=>{this.connection(),this.reconnectConfig.isReconnect=!0,this.reconnectConfig.retry--,console.log(`网络连接已断开，正在尝试重新连接(${this.reconnectConfig.retry})...`)},e.interval))}send(e){this.ws&&this.ws.send(JSON.stringify(e))}close(){this.ws.close(),this.ws=null}}class Gn{constructor(){_e(this,"ws");_e(this,"timer",null);_e(this,"interval",10*1e3);this.ws=new Un("ws://127.0.0.1:9502/message.io?token="+He.local.get("token"),{onOpen:e=>{console.log("已成功连接到消息服务器...")},onError:e=>{this.ws=void 0,console.log("未成功连接到消息服务器...")},onClose:e=>{this.ws=void 0,console.log("与消息服务器断开...")}}),this.ws.heartbeat.openHeartbeat=!1}getMessage(){this.timer=setInterval(()=>{this.ws&&this.ws.send({event:"get_unread_message"})},this.interval)}connection(){this.ws.connection()}}const qn={class:"mr-2 flex justify-end lg:justify-between w-full lg:w-auto"},Kn=["src"],Jn={__name:"ma-operation",setup(o){Bt();const e=sn(),n=Oe(),t=fe();R(null);const a=Te(),s=R(!1),l=R(!1),r=async p=>{if(p==="userCenter"&&a.push({name:"userCenter"}),p==="clearCache"){const g=await Rn.clearAllCache();He.local.remove("dictData"),g.success&&un.success(g.message)}p==="logout"&&(l.value=!0,document.querySelector("#app").style.filter="grayscale(1)")},i=async()=>{await n.logout(),document.querySelector("#app").style.filter="grayscale(0)",window.location.href="/"},c=()=>{document.querySelector("#app").style.filter="grayscale(0)"},m=()=>{He.screen(document.documentElement),s.value=!s.value},f=new Gn;return f.connection(),f.getMessage(),f.ws.on("ev_new_message",(p,g)=>{g.length>e.messageList.length&&Fn("新消息提示","您有新的消息，请注意查收！"),e.messageList=g}),(p,g)=>{const w=h("icon-fullscreen-exit"),S=h("icon-fullscreen"),M=h("a-button"),Y=h("a-tooltip"),H=h("icon-notification"),K=h("a-badge"),P=h("a-trigger"),se=h("icon-settings"),y=h("a-space"),N=h("a-avatar"),Q=h("icon-user"),b=h("a-doption"),O=h("icon-delete"),T=h("a-divider"),W=h("icon-poweroff"),U=h("a-dropdown"),ee=h("a-modal");return v(),V("div",qn,[u(y,{class:"mr-0 lg:mr-5",size:"medium"},{default:d(()=>[u(Y,{content:s.value?p.$t("sys.closeFullScreen"):p.$t("sys.fullScreen")},{default:d(()=>[u(M,{shape:"circle",class:"hidden lg:inline",onClick:m},{icon:d(()=>[s.value?(v(),$(w,{key:0})):(v(),$(S,{key:1}))]),_:1})]),_:1},8,["content"]),u(P,{trigger:"click"},{content:d(()=>[u(jn)]),default:d(()=>[u(M,{shape:"circle"},{icon:d(()=>[C(e).messageList.length>0?(v(),$(K,{key:0,count:5,dot:"",dotStyle:{width:"5px",height:"5px"}},{default:d(()=>[u(H)]),_:1})):(v(),$(H,{key:1}))]),_:1})]),_:1}),u(Y,{content:p.$t("sys.pageSetting")},{default:d(()=>[u(M,{shape:"circle",onClick:g[0]||(g[0]=()=>C(t).settingOpen=!0),class:"hidden lg:inline"},{icon:d(()=>[u(se)]),_:1})]),_:1},8,["content"])]),_:1}),u(U,{onSelect:r,trigger:"hover"},{content:d(()=>[u(b,{value:"userCenter"},{default:d(()=>[u(Q),A(" "+E(p.$t("sys.userCenter")),1)]),_:1}),u(b,{value:"clearCache"},{default:d(()=>[u(O),A(" "+E(p.$t("sys.clearCache")),1)]),_:1}),u(T,{style:{margin:"5px 0"}}),u(b,{value:"logout"},{default:d(()=>[u(W),A(" "+E(p.$t("sys.logout")),1)]),_:1})]),default:d(()=>[u(N,{class:"bg-blue-500 text-3xl avatar",style:{top:"-1px"}},{default:d(()=>[x("img",{src:C(n).user&&C(n).user.avatar?C(n).user.avatar:"/avatar.jpg"},null,8,Kn)]),_:1})]),_:1}),u(ee,{visible:l.value,"onUpdate:visible":g[1]||(g[1]=pe=>l.value=pe),onOk:i,onCancel:c},{title:d(()=>[A(E(p.$t("sys.logoutAlert")),1)]),default:d(()=>[x("div",null,E(p.$t("sys.logoutMessage")),1)]),_:1},8,["visible"])])}}},Ht=je(Jn,[["__scopeId","data-v-643e12f9"]]);/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Kt(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable})),n.push.apply(n,t)}return n}function be(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kt(Object(n),!0).forEach(function(t){Zn(o,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(n,t))})}return o}function dt(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dt=function(e){return typeof e}:dt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(o)}function Zn(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function Ee(){return Ee=Object.assign||function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t])}return o},Ee.apply(this,arguments)}function Qn(o,e){if(o==null)return{};var n={},t=Object.keys(o),a,s;for(s=0;s<t.length;s++)a=t[s],!(e.indexOf(a)>=0)&&(n[a]=o[a]);return n}function eo(o,e){if(o==null)return{};var n=Qn(o,e),t,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);for(a=0;a<s.length;a++)t=s[a],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(o,t)&&(n[t]=o[t])}return n}var to="1.15.0";function Se(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var ke=Se(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),st=Se(/Edge/i),Jt=Se(/firefox/i),Ze=Se(/safari/i)&&!Se(/chrome/i)&&!Se(/android/i),dn=Se(/iP(ad|od|hone)/i),fn=Se(/chrome/i)&&Se(/android/i),pn={capture:!1,passive:!1};function L(o,e,n){o.addEventListener(e,n,!ke&&pn)}function F(o,e,n){o.removeEventListener(e,n,!ke&&pn)}function vt(o,e){if(e){if(e[0]===">"&&(e=e.substring(1)),o)try{if(o.matches)return o.matches(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e)}catch{return!1}return!1}}function no(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function ve(o,e,n,t){if(o){n=n||document;do{if(e!=null&&(e[0]===">"?o.parentNode===n&&vt(o,e):vt(o,e))||t&&o===n)return o;if(o===n)break}while(o=no(o))}return null}var Zt=/\s+/g;function ue(o,e,n){if(o&&e)if(o.classList)o.classList[n?"add":"remove"](e);else{var t=(" "+o.className+" ").replace(Zt," ").replace(" "+e+" "," ");o.className=(t+(n?" "+e:"")).replace(Zt," ")}}function k(o,e,n){var t=o&&o.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),e===void 0?n:n[e];!(e in t)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),t[e]=n+(typeof n=="string"?"":"px")}}function ze(o,e){var n="";if(typeof o=="string")n=o;else do{var t=k(o,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!e&&(o=o.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function mn(o,e,n){if(o){var t=o.getElementsByTagName(e),a=0,s=t.length;if(n)for(;a<s;a++)n(t[a],a);return t}return[]}function ye(){var o=document.scrollingElement;return o||document.documentElement}function J(o,e,n,t,a){if(!(!o.getBoundingClientRect&&o!==window)){var s,l,r,i,c,m,f;if(o!==window&&o.parentNode&&o!==ye()?(s=o.getBoundingClientRect(),l=s.top,r=s.left,i=s.bottom,c=s.right,m=s.height,f=s.width):(l=0,r=0,i=window.innerHeight,c=window.innerWidth,m=window.innerHeight,f=window.innerWidth),(e||n)&&o!==window&&(a=a||o.parentNode,!ke))do if(a&&a.getBoundingClientRect&&(k(a,"transform")!=="none"||n&&k(a,"position")!=="static")){var p=a.getBoundingClientRect();l-=p.top+parseInt(k(a,"border-top-width")),r-=p.left+parseInt(k(a,"border-left-width")),i=l+s.height,c=r+s.width;break}while(a=a.parentNode);if(t&&o!==window){var g=ze(a||o),w=g&&g.a,S=g&&g.d;g&&(l/=S,r/=w,f/=w,m/=S,i=l+m,c=r+f)}return{top:l,left:r,bottom:i,right:c,width:f,height:m}}}function Qt(o,e,n){for(var t=$e(o,!0),a=J(o)[e];t;){var s=J(t)[n],l=void 0;if(n==="top"||n==="left"?l=a>=s:l=a<=s,!l)return t;if(t===ye())break;t=$e(t,!1)}return!1}function Ye(o,e,n,t){for(var a=0,s=0,l=o.children;s<l.length;){if(l[s].style.display!=="none"&&l[s]!==D.ghost&&(t||l[s]!==D.dragged)&&ve(l[s],n.draggable,o,!1)){if(a===e)return l[s];a++}s++}return null}function zt(o,e){for(var n=o.lastElementChild;n&&(n===D.ghost||k(n,"display")==="none"||e&&!vt(n,e));)n=n.previousElementSibling;return n||null}function me(o,e){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==D.clone&&(!e||vt(o,e))&&n++;return n}function en(o){var e=0,n=0,t=ye();if(o)do{var a=ze(o),s=a.a,l=a.d;e+=o.scrollLeft*s,n+=o.scrollTop*l}while(o!==t&&(o=o.parentNode));return[e,n]}function oo(o,e){for(var n in o)if(o.hasOwnProperty(n)){for(var t in e)if(e.hasOwnProperty(t)&&e[t]===o[n][t])return Number(n)}return-1}function $e(o,e){if(!o||!o.getBoundingClientRect)return ye();var n=o,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=k(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return ye();if(t||e)return n;t=!0}}while(n=n.parentNode);return ye()}function ao(o,e){if(o&&e)for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o}function Dt(o,e){return Math.round(o.top)===Math.round(e.top)&&Math.round(o.left)===Math.round(e.left)&&Math.round(o.height)===Math.round(e.height)&&Math.round(o.width)===Math.round(e.width)}var Qe;function hn(o,e){return function(){if(!Qe){var n=arguments,t=this;n.length===1?o.call(t,n[0]):o.apply(t,n),Qe=setTimeout(function(){Qe=void 0},e)}}}function so(){clearTimeout(Qe),Qe=void 0}function gn(o,e,n){o.scrollLeft+=e,o.scrollTop+=n}function _n(o){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}var de="Sortable"+new Date().getTime();function lo(){var o=[],e;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(a){if(!(k(a,"display")==="none"||a===D.ghost)){o.push({target:a,rect:J(a)});var s=be({},o[o.length-1].rect);if(a.thisAnimationDuration){var l=ze(a,!0);l&&(s.top-=l.f,s.left-=l.e)}a.fromRect=s}})}},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(oo(o,{target:t}),1)},animateAll:function(t){var a=this;if(!this.options.animation){clearTimeout(e),typeof t=="function"&&t();return}var s=!1,l=0;o.forEach(function(r){var i=0,c=r.target,m=c.fromRect,f=J(c),p=c.prevFromRect,g=c.prevToRect,w=r.rect,S=ze(c,!0);S&&(f.top-=S.f,f.left-=S.e),c.toRect=f,c.thisAnimationDuration&&Dt(p,f)&&!Dt(m,f)&&(w.top-f.top)/(w.left-f.left)===(m.top-f.top)/(m.left-f.left)&&(i=ro(w,p,g,a.options)),Dt(f,m)||(c.prevFromRect=m,c.prevToRect=f,i||(i=a.options.animation),a.animate(c,w,f,i)),i&&(s=!0,l=Math.max(l,i),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},i),c.thisAnimationDuration=i)}),clearTimeout(e),s?e=setTimeout(function(){typeof t=="function"&&t()},l):typeof t=="function"&&t(),o=[]},animate:function(t,a,s,l){if(l){k(t,"transition",""),k(t,"transform","");var r=ze(this.el),i=r&&r.a,c=r&&r.d,m=(a.left-s.left)/(i||1),f=(a.top-s.top)/(c||1);t.animatingX=!!m,t.animatingY=!!f,k(t,"transform","translate3d("+m+"px,"+f+"px,0)"),this.forRepaintDummy=io(t),k(t,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),k(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){k(t,"transition",""),k(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},l)}}}}function io(o){return o.offsetWidth}function ro(o,e,n,t){return Math.sqrt(Math.pow(e.top-o.top,2)+Math.pow(e.left-o.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*t.animation}var Re=[],xt={initializeByDefault:!0},lt={mount:function(e){for(var n in xt)xt.hasOwnProperty(n)&&!(n in e)&&(e[n]=xt[n]);Re.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,n,t){var a=this;this.eventCanceled=!1,t.cancel=function(){a.eventCanceled=!0};var s=e+"Global";Re.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][s]&&n[l.pluginName][s](be({sortable:n},t)),n.options[l.pluginName]&&n[l.pluginName][e]&&n[l.pluginName][e](be({sortable:n},t)))})},initializePlugins:function(e,n,t,a){Re.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var c=new r(e,n,e.options);c.sortable=e,c.options=e.options,e[i]=c,Ee(t,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var l=this.modifyOption(e,s,e.options[s]);typeof l<"u"&&(e.options[s]=l)}},getEventProperties:function(e,n){var t={};return Re.forEach(function(a){typeof a.eventProperties=="function"&&Ee(t,a.eventProperties.call(n[a.pluginName],e))}),t},modifyOption:function(e,n,t){var a;return Re.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(a=s.optionListeners[n].call(e[s.pluginName],t))}),a}};function uo(o){var e=o.sortable,n=o.rootEl,t=o.name,a=o.targetEl,s=o.cloneEl,l=o.toEl,r=o.fromEl,i=o.oldIndex,c=o.newIndex,m=o.oldDraggableIndex,f=o.newDraggableIndex,p=o.originalEvent,g=o.putSortable,w=o.extraEventProperties;if(e=e||n&&n[de],!!e){var S,M=e.options,Y="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!ke&&!st?S=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(t,!0,!0)),S.to=l||n,S.from=r||n,S.item=a||n,S.clone=s,S.oldIndex=i,S.newIndex=c,S.oldDraggableIndex=m,S.newDraggableIndex=f,S.originalEvent=p,S.pullMode=g?g.lastPutMode:void 0;var H=be(be({},w),lt.getEventProperties(t,e));for(var K in H)S[K]=H[K];n&&n.dispatchEvent(S),M[Y]&&M[Y].call(e,S)}}var co=["evt"],le=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=t.evt,s=eo(t,co);lt.pluginEvent.bind(D)(e,n,be({dragEl:_,parentEl:j,ghostEl:I,rootEl:z,nextEl:Ae,lastDownEl:ft,cloneEl:X,cloneHidden:xe,dragStarted:qe,putSortable:te,activeSortable:D.active,originalEvent:a,oldIndex:Be,oldDraggableIndex:et,newIndex:ce,newDraggableIndex:De,hideGhostForTarget:wn,unhideGhostForTarget:Sn,cloneNowHidden:function(){xe=!0},cloneNowShown:function(){xe=!1},dispatchSortableEvent:function(r){ae({sortable:n,name:r,originalEvent:a})}},s))};function ae(o){uo(be({putSortable:te,cloneEl:X,targetEl:_,rootEl:z,oldIndex:Be,oldDraggableIndex:et,newIndex:ce,newDraggableIndex:De},o))}var _,j,I,z,Ae,ft,X,xe,Be,ce,et,De,it,te,We=!1,yt=!1,bt=[],Ie,ge,$t,Tt,tn,nn,qe,Ve,tt,nt=!1,rt=!1,pt,ne,Ot=[],Ft=!1,wt=[],Ct=typeof document<"u",ut=dn,on=st||ke?"cssFloat":"float",fo=Ct&&!fn&&!dn&&"draggable"in document.createElement("div"),vn=function(){if(Ct){if(ke)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),yn=function(e,n){var t=k(e),a=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),s=Ye(e,0,n),l=Ye(e,1,n),r=s&&k(s),i=l&&k(l),c=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+J(s).width,m=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+J(l).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&r.float&&r.float!=="none"){var f=r.float==="left"?"left":"right";return l&&(i.clear==="both"||i.clear===f)?"vertical":"horizontal"}return s&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||c>=a&&t[on]==="none"||l&&t[on]==="none"&&c+m>a)?"vertical":"horizontal"},po=function(e,n,t){var a=t?e.left:e.top,s=t?e.right:e.bottom,l=t?e.width:e.height,r=t?n.left:n.top,i=t?n.right:n.bottom,c=t?n.width:n.height;return a===r||s===i||a+l/2===r+c/2},mo=function(e,n){var t;return bt.some(function(a){var s=a[de].options.emptyInsertThreshold;if(!(!s||zt(a))){var l=J(a),r=e>=l.left-s&&e<=l.right+s,i=n>=l.top-s&&n<=l.bottom+s;if(r&&i)return t=a}}),t},bn=function(e){function n(s,l){return function(r,i,c,m){var f=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(s==null&&(l||f))return!0;if(s==null||s===!1)return!1;if(l&&s==="clone")return s;if(typeof s=="function")return n(s(r,i,c,m),l)(r,i,c,m);var p=(l?r:i).options.group.name;return s===!0||typeof s=="string"&&s===p||s.join&&s.indexOf(p)>-1}}var t={},a=e.group;(!a||dt(a)!="object")&&(a={name:a}),t.name=a.name,t.checkPull=n(a.pull,!0),t.checkPut=n(a.put),t.revertClone=a.revertClone,e.group=t},wn=function(){!vn&&I&&k(I,"display","none")},Sn=function(){!vn&&I&&k(I,"display","")};Ct&&!fn&&document.addEventListener("click",function(o){if(yt)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),yt=!1,!1},!0);var Me=function(e){if(_){e=e.touches?e.touches[0]:e;var n=mo(e.clientX,e.clientY);if(n){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[de]._onDragOver(t)}}},ho=function(e){_&&_.parentNode[de]._isOutsideThisEl(e.target)};function D(o,e){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=e=Ee({},e),o[de]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,r){l.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:D.supportPointer!==!1&&"PointerEvent"in window&&!Ze,emptyInsertThreshold:5};lt.initializePlugins(this,o,n);for(var t in n)!(t in e)&&(e[t]=n[t]);bn(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:fo,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?L(o,"pointerdown",this._onTapStart):(L(o,"mousedown",this._onTapStart),L(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(L(o,"dragover",this),L(o,"dragenter",this)),bt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ee(this,lo())}D.prototype={constructor:D,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ve=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,_):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,a=this.options,s=a.preventOnFilter,l=e.type,r=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,i=(r||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||i,m=a.filter;if(Eo(t),!_&&!(/mousedown|pointerdown/.test(l)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ze&&i&&i.tagName.toUpperCase()==="SELECT")&&(i=ve(i,a.draggable,t,!1),!(i&&i.animated)&&ft!==i)){if(Be=me(i),et=me(i,a.draggable),typeof m=="function"){if(m.call(this,e,i,this)){ae({sortable:n,rootEl:c,name:"filter",targetEl:i,toEl:t,fromEl:t}),le("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(m&&(m=m.split(",").some(function(f){if(f=ve(c,f.trim(),t,!1),f)return ae({sortable:n,rootEl:f,name:"filter",targetEl:i,fromEl:t,toEl:t}),le("filter",n,{evt:e}),!0}),m)){s&&e.cancelable&&e.preventDefault();return}a.handle&&!ve(c,a.handle,t,!1)||this._prepareDragStart(e,r,i)}}},_prepareDragStart:function(e,n,t){var a=this,s=a.el,l=a.options,r=s.ownerDocument,i;if(t&&!_&&t.parentNode===s){var c=J(t);if(z=s,_=t,j=_.parentNode,Ae=_.nextSibling,ft=t,it=l.group,D.dragged=_,Ie={target:_,clientX:(n||e).clientX,clientY:(n||e).clientY},tn=Ie.clientX-c.left,nn=Ie.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,_.style["will-change"]="all",i=function(){if(le("delayEnded",a,{evt:e}),D.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Jt&&a.nativeDraggable&&(_.draggable=!0),a._triggerDragStart(e,n),ae({sortable:a,name:"choose",originalEvent:e}),ue(_,l.chosenClass,!0)},l.ignore.split(",").forEach(function(m){mn(_,m.trim(),It)}),L(r,"dragover",Me),L(r,"mousemove",Me),L(r,"touchmove",Me),L(r,"mouseup",a._onDrop),L(r,"touchend",a._onDrop),L(r,"touchcancel",a._onDrop),Jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,_.draggable=!0),le("delayStart",this,{evt:e}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(st||ke))){if(D.eventCanceled){this._onDrop();return}L(r,"mouseup",a._disableDelayedDrag),L(r,"touchend",a._disableDelayedDrag),L(r,"touchcancel",a._disableDelayedDrag),L(r,"mousemove",a._delayedDragTouchMoveHandler),L(r,"touchmove",a._delayedDragTouchMoveHandler),l.supportPointer&&L(r,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(i,l.delay)}else i()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){_&&It(_),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?L(document,"pointermove",this._onTouchMove):n?L(document,"touchmove",this._onTouchMove):L(document,"mousemove",this._onTouchMove):(L(_,"dragend",this),L(z,"dragstart",this._onDragStart));try{document.selection?mt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(We=!1,z&&_){le("dragStarted",this,{evt:n}),this.nativeDraggable&&L(document,"dragover",ho);var t=this.options;!e&&ue(_,t.dragClass,!1),ue(_,t.ghostClass,!0),D.active=this,e&&this._appendGhost(),ae({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,wn();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY),e!==n);)n=e;if(_.parentNode[de]._isOutsideThisEl(e),n)do{if(n[de]){var t=void 0;if(t=n[de]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Sn()}},_onTouchMove:function(e){if(Ie){var n=this.options,t=n.fallbackTolerance,a=n.fallbackOffset,s=e.touches?e.touches[0]:e,l=I&&ze(I,!0),r=I&&l&&l.a,i=I&&l&&l.d,c=ut&&ne&&en(ne),m=(s.clientX-Ie.clientX+a.x)/(r||1)+(c?c[0]-Ot[0]:0)/(r||1),f=(s.clientY-Ie.clientY+a.y)/(i||1)+(c?c[1]-Ot[1]:0)/(i||1);if(!D.active&&!We){if(t&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(I){l?(l.e+=m-($t||0),l.f+=f-(Tt||0)):l={a:1,b:0,c:0,d:1,e:m,f};var p="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");k(I,"webkitTransform",p),k(I,"mozTransform",p),k(I,"msTransform",p),k(I,"transform",p),$t=m,Tt=f,ge=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!I){var e=this.options.fallbackOnBody?document.body:z,n=J(_,!0,ut,!0,e),t=this.options;if(ut){for(ne=e;k(ne,"position")==="static"&&k(ne,"transform")==="none"&&ne!==document;)ne=ne.parentNode;ne!==document.body&&ne!==document.documentElement?(ne===document&&(ne=ye()),n.top+=ne.scrollTop,n.left+=ne.scrollLeft):ne=ye(),Ot=en(ne)}I=_.cloneNode(!0),ue(I,t.ghostClass,!1),ue(I,t.fallbackClass,!0),ue(I,t.dragClass,!0),k(I,"transition",""),k(I,"transform",""),k(I,"box-sizing","border-box"),k(I,"margin",0),k(I,"top",n.top),k(I,"left",n.left),k(I,"width",n.width),k(I,"height",n.height),k(I,"opacity","0.8"),k(I,"position",ut?"absolute":"fixed"),k(I,"zIndex","100000"),k(I,"pointerEvents","none"),D.ghost=I,e.appendChild(I),k(I,"transform-origin",tn/parseInt(I.style.width)*100+"% "+nn/parseInt(I.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,a=e.dataTransfer,s=t.options;if(le("dragStart",this,{evt:e}),D.eventCanceled){this._onDrop();return}le("setupClone",this),D.eventCanceled||(X=_n(_),X.removeAttribute("id"),X.draggable=!1,X.style["will-change"]="",this._hideClone(),ue(X,this.options.chosenClass,!1),D.clone=X),t.cloneId=mt(function(){le("clone",t),!D.eventCanceled&&(t.options.removeCloneOnHide||z.insertBefore(X,_),t._hideClone(),ae({sortable:t,name:"clone"}))}),!n&&ue(_,s.dragClass,!0),n?(yt=!0,t._loopId=setInterval(t._emulateDragOver,50)):(F(document,"mouseup",t._onDrop),F(document,"touchend",t._onDrop),F(document,"touchcancel",t._onDrop),a&&(a.effectAllowed="move",s.setData&&s.setData.call(t,a,_)),L(document,"drop",t),k(_,"transform","translateZ(0)")),We=!0,t._dragStartId=mt(t._dragStarted.bind(t,n,e)),L(document,"selectstart",t),qe=!0,Ze&&k(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,a,s,l,r=this.options,i=r.group,c=D.active,m=it===i,f=r.sort,p=te||c,g,w=this,S=!1;if(Ft)return;function M(B,kt){le(B,w,be({evt:e,isOwner:m,axis:g?"vertical":"horizontal",revert:l,dragRect:a,targetRect:s,canSort:f,fromSortable:p,target:t,completed:H,onMove:function(Le,Dn){return ct(z,n,_,a,Le,J(Le),e,Dn)},changed:K},kt))}function Y(){M("dragOverAnimationCapture"),w.captureAnimationState(),w!==p&&p.captureAnimationState()}function H(B){return M("dragOverCompleted",{insertion:B}),B&&(m?c._hideClone():c._showClone(w),w!==p&&(ue(_,te?te.options.ghostClass:c.options.ghostClass,!1),ue(_,r.ghostClass,!0)),te!==w&&w!==D.active?te=w:w===D.active&&te&&(te=null),p===w&&(w._ignoreWhileAnimating=t),w.animateAll(function(){M("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(t===_&&!_.animated||t===n&&!t.animated)&&(Ve=null),!r.dragoverBubble&&!e.rootEl&&t!==document&&(_.parentNode[de]._isOutsideThisEl(e.target),!B&&Me(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function K(){ce=me(_),De=me(_,r.draggable),ae({sortable:w,name:"change",toEl:n,newIndex:ce,newDraggableIndex:De,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=ve(t,r.draggable,n,!0),M("dragOver"),D.eventCanceled)return S;if(_.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||w._ignoreWhileAnimating===t)return H(!1);if(yt=!1,c&&!r.disabled&&(m?f||(l=j!==z):te===this||(this.lastPutMode=it.checkPull(this,c,_,e))&&i.checkPut(this,c,_,e))){if(g=this._getDirection(e,t)==="vertical",a=J(_),M("dragOverValid"),D.eventCanceled)return S;if(l)return j=z,Y(),this._hideClone(),M("revert"),D.eventCanceled||(Ae?z.insertBefore(_,Ae):z.appendChild(_)),H(!0);var P=zt(n,r.draggable);if(!P||yo(e,g,this)&&!P.animated){if(P===_)return H(!1);if(P&&n===e.target&&(t=P),t&&(s=J(t)),ct(z,n,_,a,t,s,e,!!t)!==!1)return Y(),P&&P.nextSibling?n.insertBefore(_,P.nextSibling):n.appendChild(_),j=n,K(),H(!0)}else if(P&&vo(e,g,this)){var se=Ye(n,0,r,!0);if(se===_)return H(!1);if(t=se,s=J(t),ct(z,n,_,a,t,s,e,!1)!==!1)return Y(),n.insertBefore(_,se),j=n,K(),H(!0)}else if(t.parentNode===n){s=J(t);var y=0,N,Q=_.parentNode!==n,b=!po(_.animated&&_.toRect||a,t.animated&&t.toRect||s,g),O=g?"top":"left",T=Qt(t,"top","top")||Qt(_,"top","top"),W=T?T.scrollTop:void 0;Ve!==t&&(N=s[O],nt=!1,rt=!b&&r.invertSwap||Q),y=bo(e,t,s,g,b?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,rt,Ve===t);var U;if(y!==0){var ee=me(_);do ee-=y,U=j.children[ee];while(U&&(k(U,"display")==="none"||U===I))}if(y===0||U===t)return H(!1);Ve=t,tt=y;var pe=t.nextElementSibling,re=!1;re=y===1;var we=ct(z,n,_,a,t,s,e,re);if(we!==!1)return(we===1||we===-1)&&(re=we===1),Ft=!0,setTimeout(_o,30),Y(),re&&!pe?n.appendChild(_):t.parentNode.insertBefore(_,re?pe:t),T&&gn(T,0,W-T.scrollTop),j=_.parentNode,N!==void 0&&!rt&&(pt=Math.abs(N-J(t)[O])),K(),H(!0)}if(n.contains(_))return H(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",Me),F(document,"mousemove",Me),F(document,"touchmove",Me)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(ce=me(_),De=me(_,t.draggable),le("drop",this,{evt:e}),j=_&&_.parentNode,ce=me(_),De=me(_,t.draggable),D.eventCanceled){this._nulling();return}We=!1,rt=!1,nt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Lt(this.cloneId),Lt(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ze&&k(document.body,"user-select",""),k(_,"transform",""),e&&(qe&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),I&&I.parentNode&&I.parentNode.removeChild(I),(z===j||te&&te.lastPutMode!=="clone")&&X&&X.parentNode&&X.parentNode.removeChild(X),_&&(this.nativeDraggable&&F(_,"dragend",this),It(_),_.style["will-change"]="",qe&&!We&&ue(_,te?te.options.ghostClass:this.options.ghostClass,!1),ue(_,this.options.chosenClass,!1),ae({sortable:this,name:"unchoose",toEl:j,newIndex:null,newDraggableIndex:null,originalEvent:e}),z!==j?(ce>=0&&(ae({rootEl:j,name:"add",toEl:j,fromEl:z,originalEvent:e}),ae({sortable:this,name:"remove",toEl:j,originalEvent:e}),ae({rootEl:j,name:"sort",toEl:j,fromEl:z,originalEvent:e}),ae({sortable:this,name:"sort",toEl:j,originalEvent:e})),te&&te.save()):ce!==Be&&ce>=0&&(ae({sortable:this,name:"update",toEl:j,originalEvent:e}),ae({sortable:this,name:"sort",toEl:j,originalEvent:e})),D.active&&((ce==null||ce===-1)&&(ce=Be,De=et),ae({sortable:this,name:"end",toEl:j,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){le("nulling",this),z=_=j=I=Ae=X=ft=xe=Ie=ge=qe=ce=De=Be=et=Ve=tt=te=it=D.dragged=D.ghost=D.clone=D.active=null,wt.forEach(function(e){e.checked=!0}),wt.length=$t=Tt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":_&&(this._onDragOver(e),go(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,a=0,s=t.length,l=this.options;a<s;a++)n=t[a],ve(n,l.draggable,this.el,!1)&&e.push(n.getAttribute(l.dataIdAttr)||So(n));return e},sort:function(e,n){var t={},a=this.el;this.toArray().forEach(function(s,l){var r=a.children[l];ve(r,this.options.draggable,a,!1)&&(t[s]=r)},this),n&&this.captureAnimationState(),e.forEach(function(s){t[s]&&(a.removeChild(t[s]),a.appendChild(t[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ve(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var a=lt.modifyOption(this,e,n);typeof a<"u"?t[e]=a:t[e]=n,e==="group"&&bn(t)},destroy:function(){le("destroy",this);var e=this.el;e[de]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bt.splice(bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xe){if(le("hideClone",this),D.eventCanceled)return;k(X,"display","none"),this.options.removeCloneOnHide&&X.parentNode&&X.parentNode.removeChild(X),xe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xe){if(le("showClone",this),D.eventCanceled)return;_.parentNode==z&&!this.options.group.revertClone?z.insertBefore(X,_):Ae?z.insertBefore(X,Ae):z.appendChild(X),this.options.group.revertClone&&this.animate(_,X),k(X,"display",""),xe=!1}}};function go(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function ct(o,e,n,t,a,s,l,r){var i,c=o[de],m=c.options.onMove,f;return window.CustomEvent&&!ke&&!st?i=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(i=document.createEvent("Event"),i.initEvent("move",!0,!0)),i.to=e,i.from=o,i.dragged=n,i.draggedRect=t,i.related=a||e,i.relatedRect=s||J(e),i.willInsertAfter=r,i.originalEvent=l,o.dispatchEvent(i),m&&(f=m.call(c,i,l)),f}function It(o){o.draggable=!1}function _o(){Ft=!1}function vo(o,e,n){var t=J(Ye(n.el,0,n.options,!0)),a=10;return e?o.clientX<t.left-a||o.clientY<t.top&&o.clientX<t.right:o.clientY<t.top-a||o.clientY<t.bottom&&o.clientX<t.left}function yo(o,e,n){var t=J(zt(n.el,n.options.draggable)),a=10;return e?o.clientX>t.right+a||o.clientX<=t.right&&o.clientY>t.bottom&&o.clientX>=t.left:o.clientX>t.right&&o.clientY>t.top||o.clientX<=t.right&&o.clientY>t.bottom+a}function bo(o,e,n,t,a,s,l,r){var i=t?o.clientY:o.clientX,c=t?n.height:n.width,m=t?n.top:n.left,f=t?n.bottom:n.right,p=!1;if(!l){if(r&&pt<c*a){if(!nt&&(tt===1?i>m+c*s/2:i<f-c*s/2)&&(nt=!0),nt)p=!0;else if(tt===1?i<m+pt:i>f-pt)return-tt}else if(i>m+c*(1-a)/2&&i<f-c*(1-a)/2)return wo(e)}return p=p||l,p&&(i<m+c*s/2||i>f-c*s/2)?i>m+c/2?1:-1:0}function wo(o){return me(_)<me(o)?1:-1}function So(o){for(var e=o.tagName+o.className+o.src+o.href+o.textContent,n=e.length,t=0;n--;)t+=e.charCodeAt(n);return t.toString(36)}function Eo(o){wt.length=0;for(var e=o.getElementsByTagName("input"),n=e.length;n--;){var t=e[n];t.checked&&wt.push(t)}}function mt(o){return setTimeout(o,0)}function Lt(o){return clearTimeout(o)}Ct&&L(document,"touchmove",function(o){(D.active||We)&&o.cancelable&&o.preventDefault()});D.utils={on:L,off:F,css:k,find:mn,is:function(e,n){return!!ve(e,n,e,!1)},extend:ao,throttle:hn,closest:ve,toggleClass:ue,clone:_n,index:me,nextTick:mt,cancelNextTick:Lt,detectDirection:yn,getChild:Ye};D.get=function(o){return o[de]};D.mount=function(){for(var o=arguments.length,e=new Array(o),n=0;n<o;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(D.utils=be(be({},D.utils),t.utils)),lt.mount(t)})};D.create=function(o,e){return new D(o,e)};D.version=to;var G=[],Ke,Rt,Vt=!1,Mt,At,St,Je;function Co(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return o.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?L(document,"dragover",this._handleAutoScroll):this.options.supportPointer?L(document,"pointermove",this._handleFallbackAutoScroll):t.touches?L(document,"touchmove",this._handleFallbackAutoScroll):L(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),an(),ht(),so()},nulling:function(){St=Rt=Ke=Vt=Je=Mt=At=null,G.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var a=this,s=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,r=document.elementFromPoint(s,l);if(St=n,t||this.options.forceAutoScrollFallback||st||ke||Ze){Pt(n,this.options,r,t);var i=$e(r,!0);Vt&&(!Je||s!==Mt||l!==At)&&(Je&&an(),Je=setInterval(function(){var c=$e(document.elementFromPoint(s,l),!0);c!==i&&(i=c,ht()),Pt(n,a.options,c,t)},10),Mt=s,At=l)}else{if(!this.options.bubbleScroll||$e(r,!0)===ye()){ht();return}Pt(n,this.options,$e(r,!1),!1)}}},Ee(o,{pluginName:"scroll",initializeByDefault:!0})}function ht(){G.forEach(function(o){clearInterval(o.pid)}),G=[]}function an(){clearInterval(Je)}var Pt=hn(function(o,e,n,t){if(e.scroll){var a=(o.touches?o.touches[0]:o).clientX,s=(o.touches?o.touches[0]:o).clientY,l=e.scrollSensitivity,r=e.scrollSpeed,i=ye(),c=!1,m;Rt!==n&&(Rt=n,ht(),Ke=e.scroll,m=e.scrollFn,Ke===!0&&(Ke=$e(n,!0)));var f=0,p=Ke;do{var g=p,w=J(g),S=w.top,M=w.bottom,Y=w.left,H=w.right,K=w.width,P=w.height,se=void 0,y=void 0,N=g.scrollWidth,Q=g.scrollHeight,b=k(g),O=g.scrollLeft,T=g.scrollTop;g===i?(se=K<N&&(b.overflowX==="auto"||b.overflowX==="scroll"||b.overflowX==="visible"),y=P<Q&&(b.overflowY==="auto"||b.overflowY==="scroll"||b.overflowY==="visible")):(se=K<N&&(b.overflowX==="auto"||b.overflowX==="scroll"),y=P<Q&&(b.overflowY==="auto"||b.overflowY==="scroll"));var W=se&&(Math.abs(H-a)<=l&&O+K<N)-(Math.abs(Y-a)<=l&&!!O),U=y&&(Math.abs(M-s)<=l&&T+P<Q)-(Math.abs(S-s)<=l&&!!T);if(!G[f])for(var ee=0;ee<=f;ee++)G[ee]||(G[ee]={});(G[f].vx!=W||G[f].vy!=U||G[f].el!==g)&&(G[f].el=g,G[f].vx=W,G[f].vy=U,clearInterval(G[f].pid),(W!=0||U!=0)&&(c=!0,G[f].pid=setInterval(function(){t&&this.layer===0&&D.active._onTouchMove(St);var pe=G[this.layer].vy?G[this.layer].vy*r:0,re=G[this.layer].vx?G[this.layer].vx*r:0;typeof m=="function"&&m.call(D.dragged.parentNode[de],re,pe,o,St,G[this.layer].el)!=="continue"||gn(G[this.layer].el,re,pe)}.bind({layer:f}),24))),f++}while(e.bubbleScroll&&p!==i&&(p=$e(p,!1)));Vt=c}},30),En=function(e){var n=e.originalEvent,t=e.putSortable,a=e.dragEl,s=e.activeSortable,l=e.dispatchSortableEvent,r=e.hideGhostForTarget,i=e.unhideGhostForTarget;if(n){var c=t||s;r();var m=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(m.clientX,m.clientY);i(),c&&!c.el.contains(f)&&(l("spill"),this.onSpill({dragEl:a,putSortable:t}))}};function Xt(){}Xt.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var a=Ye(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:En};Ee(Xt,{pluginName:"revertOnSpill"});function Yt(){}Yt.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,a=t||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:En};Ee(Yt,{pluginName:"removeOnSpill"});D.mount(new Co);D.mount(Yt,Xt);const ko=o=>(ln("data-v-5f899945"),o=o(),rn(),o),Do={key:0,class:"flex justify-between tags-container",ref:"containerDom"},xo=["onContextmenu","onClick"],$o={key:0,class:"ma-tag-prev"},To={key:1,class:"ma-tag-next"},Oo=ko(()=>x("span",{class:"ma-tags-more"},[x("span",{class:"ma-tags-more-icon"},[x("i",{class:"ma-box ma-box-t"}),x("i",{class:"ma-box ma-box-b"})])],-1)),Io={class:"ma-tags-more-contextmenu"},Mo={__name:"ma-tags",setup(o){const e=Ne(),n=Te(),t=fe(),a=Et(),s=R(null),l=R(!1),r=R(!1),i=R(null),c=R(0),m=R(0),f=["login"];he(()=>t.tag,b=>{Ue(()=>{l.value=s.value.scrollWidth>s.value.offsetWidth})},{deep:!0}),he(()=>a.tags,b=>{Ue(()=>{l.value=s.value.scrollWidth>s.value.offsetWidth})},{deep:!0}),he(()=>e,b=>{f.includes(b.name)||Ln({name:b.name,path:b.fullPath,affix:b.meta.affix,title:b.meta.title}),Ue(()=>{s.value&&s.value.scrollWidth>s.value.clientWidth&&s.value.querySelector(".active").scrollIntoView()})},{deep:!0}),he(r,b=>{const O=T=>{const W=document.querySelector(".tags-contextmenu");W&&!W.contains(T.target)&&w()};b?document.body.addEventListener("click",T=>O(T)):document.body.removeEventListener("click",T=>O(T))});const p=b=>{n.push({path:b.path,query:He.getRequestParams(b.path)})},g=(b,O)=>{i.value=O,r.value=!0,c.value=b.clientX+1,m.value=b.clientY+1,Ue(()=>{const T=document.querySelector(".tags-contextmenu");document.body.offsetWidth-b.clientX<T.offsetWidth&&(c.value=document.body.offsetWidth-T.offsetWidth+1,m.value=b.clientY+1)})},w=()=>{i.value=null,r.value=!1},S=()=>{const b=i.value;r.value=!1,e.fullPath!=b.fullPath&&n.push({path:b.path,query:He.getRequestParams(b.path)}),document.getElementById("app").classList.add("max-size")},M=()=>{const b=i.value;r.value=!1,e.fullPath!=b.fullPath&&n.push({path:b.path,query:He.getRequestParams(b.path)}),qt()},Y=()=>{qt()},H=()=>{[...a.tags].forEach(O=>{(O.affix||e.path==O.path)&&Ge(O)})},K=()=>{i.value.affix||(Ge(i.value),r.value=!1)},P=()=>{[...a.tags].forEach(O=>{if(O.affix||e.path==O.path)return!0;Ge(O)}),r.value=!1},se=()=>{const b=i.value;e.path!=b.path&&n.push({path:b.path}),[...a.tags].forEach(T=>{if(T.affix||b.path==T.path)return!0;Ge(T)}),r.value=!1},y=b=>{const O=b.wheelDelta||b.detail,T=1,W=-1;let U=0;O==3||O<0&&O!=-3?U=T*50:U=W*50,s.value.scrollLeft+=U},N=b=>{const O=s.value.scrollLeft,T=O+b,W=b/50;Q(O,T,W)},Q=(b,O,T)=>{T>0?b<O?(b+=T,s.value.scrollLeft=b,window.requestAnimationFrame(()=>{Q(b,O,T)})):s.value.scrollLeft=O:b>O?(b+=T,s.value.scrollLeft=b,window.requestAnimationFrame(()=>{Q(b,O,T)})):s.value.scrollLeft=O};return Fe(()=>{s.value&&(D.create(s.value,{draggable:"a",animation:300}),s.value.addEventListener("mousewheel",y,{passive:!0})||s.value.addEventListener("DOMMouseScroll",y,{passive:!0}),Ue(()=>{l.value=s.value.scrollWidth>s.value.offsetWidth}))}),(b,O)=>{const T=h("icon-close"),W=h("IconLeft"),U=h("IconRight"),ee=h("icon-refresh"),pe=h("a-divider"),re=h("icon-close-circle"),we=h("icon-close-circle-fill"),B=h("a-trigger"),kt=h("icon-fullscreen");return C(t).tag?(v(),V("div",Do,[x("div",{class:ie(["menu-tags-wrapper",{"tag-pn":l.value}]),ref:"scrollbarDom"},[x("div",{class:"tags",ref_key:"tags",ref:s},[(v(!0),V(Z,null,Ce(C(a).tags,oe=>(v(),V("a",{key:oe.path,onContextmenu:Gt(Le=>g(Le,oe),["prevent"]),class:ie(C(e).fullPath==oe.path?"active":""),onClick:Le=>p(oe)},[A(E(oe.customTitle?oe.customTitle:C(t).i18n?b.$t("menus."+oe.name).indexOf(".")>0?oe.title:b.$t("menus."+oe.name):oe.title)+" ",1),oe.affix?q("",!0):(v(),$(T,{key:0,class:"tag-icon",onClick:Gt(Le=>C(Ge)(oe),["stop"])},null,8,["onClick"]))],42,xo))),128))],512),l.value?(v(),V("span",$o,[u(W,{size:20,class:"tag-scroll-icon",onClick:O[0]||(O[0]=oe=>N(-500))})])):q("",!0),l.value?(v(),V("span",To,[u(U,{size:20,class:"tag-scroll-icon",onClick:O[1]||(O[1]=oe=>N(500))})])):q("",!0)],2),u(B,{class:"ma-tags-more-dropdown","popup-translate":[-65,-6],"show-arrow":!0,trigger:"hover"},{content:d(()=>[x("ul",Io,[x("li",{onClick:Y},[u(ee),A(" "+E(b.$t("sys.tags.refresh")),1)]),u(pe,{class:"dropdown-divider"}),x("li",{onClick:H},[u(re),A(" "+E(b.$t("sys.tags.closeTag")),1)]),x("li",{onClick:P},[u(we),A(" "+E(b.$t("sys.tags.closeOtherTag")),1)])])]),default:d(()=>[Oo]),_:1}),r.value?(v(),V("ul",{key:0,class:"tags-contextmenu",style:Xe({left:c.value+"px",top:m.value+"px"})},[x("li",{onClick:M},[u(ee),A(" "+E(b.$t("sys.tags.refresh")),1)]),x("li",{onClick:S},[u(kt),A(" "+E(b.$t("sys.tags.fullscreen")),1)]),u(pe),x("li",{onClick:K,class:ie(i.value.affix?"disabled":"")},[u(re),A(" "+E(b.$t("sys.tags.closeTag")),1)],2),x("li",{onClick:se},[u(we),A(" "+E(b.$t("sys.tags.closeOtherTag")),1)])],4)):q("",!0)],512)):q("",!0)}}},jt=je(Mo,[["__scopeId","data-v-5f899945"]]),Ao={class:"flex justify-between",style:{height:"50px"}},Po=x("img",{src:at,class:"bg-white"},null,-1),No={__name:"ma-columns-header",setup(o){return(e,n)=>{const t=h("a-avatar"),a=h("a-layout-header");return v(),$(a,{class:"layout-header flex flex-col operation-area"},{default:d(()=>[x("div",Ao,[u(t,{class:"mt-1 ml-2 inline lg:hidden",style:{width:"45px"},size:40},{default:d(()=>[Po]),_:1}),u(cn),u(Ht)]),u(jt,{class:"hidden lg:flex"})]),_:1})}}};const Cn={__name:"children-menu",props:{modelValue:Array},emits:["go"],setup(o,{emit:e}){const n=Te(),t=fe(),a=Et(),s=l=>{l.meta&&l.meta.type==="L"?window.open(l.path):(n.push(l.path),a.addTag({name:l.name,title:l.meta.title,path:l.path}))};return(l,r)=>{const i=h("a-menu-item"),c=h("children-menu",!0),m=h("a-sub-menu"),f=h("a-layout-content");return v(),$(f,{class:"sys-menus"},{default:d(()=>[(v(!0),V(Z,null,Ce(o.modelValue,p=>(v(),V(Z,{key:p.id},[p.meta.hidden?q("",!0):(v(),V(Z,{key:0},[!p.children||p.children.length===0?(v(),$(i,{key:p.name,onClick:g=>s(p)},ot({default:d(()=>[A(" "+E(C(t).i18n?l.$t(`menus.${p.name}`).indexOf(".")>0?p.meta.title:l.$t(`menus.${p.name}`):p.meta.title),1)]),_:2},[p.meta.icon?{name:"icon",fn:d(()=>[(v(),$(Pe(p.meta.icon),{class:ie(p.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),$(m,{key:p.name},ot({title:d(()=>[A(E(C(t).i18n?l.$t(`menus.${p.name}`).indexOf(".")>0?p.meta.title:l.$t(`menus.${p.name}`):p.meta.title),1)]),default:d(()=>[p.children?(v(),$(c,{key:0,modelValue:p.children,"onUpdate:modelValue":g=>p.children=g},null,8,["modelValue","onUpdate:modelValue"])):q("",!0)]),_:2},[p.meta.icon?{name:"icon",fn:d(()=>[(v(),$(Pe(p.meta.icon),{class:ie(p.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1024))],64))],64))),128))]),_:1})}}};const Fo={__name:"ma-menu",props:{height:{type:String,default:"100%"}},setup(o,{expose:e}){const n=o;Te();const t=Ne(),{t:a}=Bt(),s=fe();Oe();const l=R([]),r=R([]),i=R([]),c=R("");Fe(()=>{r.value=[t.name],f()}),he(()=>t,g=>{r.value=[g.name],f()},{deep:!0});const m=g=>{g.children&&g.children.length>0&&(l.value=g.children,c.value=a("menus."+g.name).indexOf(".")>0?g.meta.title:a("menus."+g.name))},f=()=>{t.matched[1]&&t.matched[1].meta&&!t.matched[1].meta.breadcrumb?(i.value=[],t.matched.map((g,w)=>{t.matched[0].name==="layout"&&i.value.push("home")})):(i.value=[],t.matched[1]&&t.matched[1].meta&&t.matched[1].meta.breadcrumb.map(g=>{i.value.push(g.name)}))},p=g=>{s.toggleMenu(g)};return e({loadChildMenu:m,title:c,actives:r,menus:l,openKeys:i,findTopMenuName:f}),(g,w)=>{const S=h("a-menu");return v(),$(S,{class:"ma-menu",style:Xe({width:C(s).menuWidth+"px",height:n.height}),breakpoint:"md","open-keys":i.value,"onUpdate:openKeys":w[1]||(w[1]=M=>i.value=M),"selected-keys":r.value,"onUpdate:selectedKeys":w[2]||(w[2]=M=>r.value=M),accordion:!0,"collapsed-width":45,"show-collapse-button":"",collapsed:C(s).menuCollapse,onCollapse:p,"popup-max-height":360,"auto-scroll-into-view":""},{default:d(()=>[u(Cn,{modelValue:l.value,"onUpdate:modelValue":w[0]||(w[0]=M=>l.value=M)},null,8,["modelValue"])]),_:1},8,["style","open-keys","selected-keys","collapsed"])}}},kn=je(Fo,[["__scopeId","data-v-c2595f77"]]);const Lo={class:"sider customer-scrollbar flex flex-col items-center bg-gray-800 dark:border-blackgray-5"},Ro=x("img",{src:at,class:"bg-white"},null,-1),Vo={class:"mt-1 parent-menu-container"},Wo=["onClick"],Bo={class:"layout-menu shadow flex flex-col"},Ho={__name:"ma-columns-menu",setup(o){const e=Ne(),n=Te(),t=R(null),a=fe(),s=Oe(),l=R(!1),r=R(""),i=R("flex flex-col parent-menu items-center rounded mt-1 text-gray-200 hover:bg-gray-700 dark:hover:text-gray-50 dark:hover:bg-blackgray-1");Fe(()=>{c()}),he(()=>e,f=>{c()},{deep:!0});const c=()=>{var p,g;let f;(g=(p=e.matched[1])==null?void 0:p.meta)!=null&&g.breadcrumb?f=e.matched[1].meta.breadcrumb[0].name:f="home",s.routers&&s.routers.length>0&&s.routers.map((w,S)=>{w.name==f&&m(w,S)})},m=(f,p)=>{var g;if(f.meta.type==="L"){window.open(f.path);return}f.children.length>0?(t.value.loadChildMenu(f),l.value=!0):(l.value=!1,n.push(f.path)),r.value=(g=t.value)==null?void 0:g.title,document.querySelectorAll(".parent-menu").forEach((w,S)=>{p!==S?w.classList.remove("active"):w.classList.add("active")})};return(f,p)=>{const g=h("a-avatar"),w=h("a-layout-sider");return v(),V(Z,null,[x("div",Lo,[u(g,{class:"mt-2",size:40},{default:d(()=>[Ro]),_:1}),x("ul",Vo,[(v(!0),V(Z,null,Ce(C(s).routers,(S,M)=>(v(),V("li",{key:M,class:ie(`${i.value}`),onClick:Y=>m(S,M)},[S.meta.icon?(v(),$(Pe(S.meta.icon),{key:0,class:"text-xl mt-1"})):q("",!0),x("span",{class:"mt-0.5",style:Xe(C(a).language==="en"?"font-size: 10px":"")},E(C(a).i18n?f.$t(`menus.${S.name}`).indexOf(".")>0?S.meta.title:f.$t(`menus.${S.name}`):S.meta.title),5)],10,Wo))),128))])]),gt(x("div",Bo,[gt(x("div",{class:"menu-title flex items-center"},E(r.value),513),[[_t,!C(a).menuCollapse]]),u(w,{style:Xe(`width: ${C(a).menuCollapse?"50px":C(a).menuWidth+"px"};
        height: ${C(a).menuCollapse?"100%":"calc(100% - 51px)"};`)},{default:d(()=>[u(kn,{ref_key:"MaMenuRef",ref:t,class:ie(C(a).menuCollapse?"ml-0.5":"")},null,8,["class"])]),_:1},8,["style"])],512),[[_t,l.value]])],64)}}},zo={class:"w-full h-full"},Xo=["src"],Yo={__name:"iframe-view",setup(o){const e=Tn(),n=Ne();he(()=>n,a=>{t(a)},{deep:!0});const t=a=>{a.meta.type==="I"&&e.addIframe(a)};return t(n),(a,s)=>gt((v(),V("div",zo,[(v(!0),V(Z,null,Ce(C(e).iframes,l=>gt((v(),V("iframe",{src:l.meta.url,key:l.name,frameborder:"0",class:"w-full h-full"},null,8,Xo)),[[_t,l.meta.url===a.$route.meta.url]])),128))],512)),[[_t,a.$route.meta.type==="I"]])}},Ut={__name:"ma-workerArea",setup(o){const e=fe(),n=On();return(t,a)=>{const s=h("router-view"),l=h("a-layout-content");return v(),$(l,{class:"work-area customer-scrollbar relative"},{default:d(()=>[x("div",{class:ie(["h-full",{"p-3":t.$route.path.indexOf("maIframe")===-1}])},[u(s,null,{default:d(({Component:r})=>[u(Pn,{name:C(e).animation,mode:"out-in"},{default:d(()=>[(v(),$(An,{include:C(n).keepAlives},[C(n).show?(v(),$(Pe(r),{key:t.$route.fullPath})):q("",!0)],1032,["include"]))]),_:2},1032,["name"])]),_:1}),u(Yo)],2)]),_:1})}}},jo={id:"layout-columns-left-panel",class:"ma-ui-menu layout-columns-left-panel hidden lg:flex justify-between"},Uo={__name:"index",setup(o){const e=R(0);return Fe(()=>{const n=document.getElementById("layout-columns-left-panel");new In(a=>{for(const s of a)switch(s.target){case n:e.value=s.contentRect.width;break}}).observe(n)}),(n,t)=>{const a=h("a-layout-content");return v(),$(a,{class:"layout flex justify-between"},{default:d(()=>[x("div",jo,[u(Ho)]),x("div",{class:"layout-columns-right-panel flex flex-col",style:Xe(`width: calc(100% - ${e.value}px)`)},[u(No,{class:"ma-ui-header"}),u(Ut)],4)]),_:1})}}};const Go={class:"flex justify-center logo"},qo=x("img",{src:at,class:"bg-white"},null,-1),Ko={key:0,class:"ml-2 text-xl mt-2.5"},Jo={__name:"ma-classic-slider",setup(o){const e=R(null),n=Oe(),t=fe();return Fe(()=>{setTimeout(a=>{e.value.menus=n.routers},50)}),(a,s)=>{const l=h("a-avatar"),r=h("a-layout-sider");return v(),$(r,{class:"layout-classic-sider h-full flex flex-col hidden lg:block",style:Xe(`width: ${C(t).menuCollapse?"48px":C(t).menuWidth+"px"};`)},{default:d(()=>[x("div",Go,[u(l,{class:"mt-1",size:40},{default:d(()=>[qo]),_:1}),C(t).menuCollapse?q("",!0):(v(),V("span",Ko,E(a.$title),1))]),u(kn,{ref_key:"MaMenuRef",ref:e,height:"calc(100% - 51px)",class:ie(`${C(t).menuCollapse?"ml-1.5":""};`)},null,8,["class"])]),_:1},8,["style"])}}},Zo={class:"flex justify-between layout-classic-header-container"},Qo=x("img",{src:at,class:"bg-white"},null,-1),ea={__name:"ma-classic-header",setup(o){return(e,n)=>{const t=h("a-avatar"),a=h("a-layout-header");return v(),$(a,{class:"layout-classic-header flex flex-col operation-area"},{default:d(()=>[x("div",Zo,[u(t,{class:"mt-1 ml-2 inline lg:hidden",style:{width:"45px"},size:40},{default:d(()=>[Qo]),_:1}),u(cn),u(Ht)]),u(jt,{class:"hidden lg:flex"})]),_:1})}}},ta={__name:"index",setup(o){return(e,n)=>{const t=h("a-layout-content"),a=h("a-layout");return v(),$(a,{class:"layout flex justify-between h-full"},{default:d(()=>[u(Jo,{class:"ma-ui-slider"}),u(t,{class:"flex flex-col"},{default:d(()=>[u(ea,{class:"ma-ui-header"}),u(Ut)]),_:1})]),_:1})}}};const na={__name:"sub-menu",props:{menuInfo:Object},emits:["go"],setup(o,{emit:e}){const n=Te(),t=Et(),a=s=>{s.meta&&s.meta.type==="L"?window.open(s.path):(n.push(s.path),t.addTag({name:s.name,title:s.meta.title,path:s.path}))};return(s,l)=>{const r=h("a-menu-item"),i=h("SubMenu",!0),c=h("a-sub-menu");return v(),$(c,{key:o.menuInfo.name},ot({title:d(()=>[A(E(s.$t(`menus.${o.menuInfo.name}`).indexOf(".")>0?o.menuInfo.meta.title:s.$t(`menus.${o.menuInfo.name}`)),1)]),default:d(()=>[(v(!0),V(Z,null,Ce(o.menuInfo.children,m=>(v(),V(Z,{key:m.id},[!m.children||m.children.length===0?(v(),$(r,{key:m.name,onClick:f=>a(m)},ot({default:d(()=>[A(" "+E(s.$t(`menus.${m.name}`).indexOf(".")>0?m.meta.title:s.$t(`menus.${m.name}`)),1)]),_:2},[m.meta.icon?{name:"icon",fn:d(()=>[(v(),$(Pe(m.meta.icon),{class:ie(o.menuInfo.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),$(i,{key:1,"menu-info":m},null,8,["menu-info"]))],64))),128))]),_:2},[o.menuInfo.meta.icon?{name:"icon",fn:d(()=>[(v(),$(Pe(o.menuInfo.meta.icon),{class:ie(o.menuInfo.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1024)}}},oa=je(na,[["__scopeId","data-v-dbcd81e0"]]);const aa={__name:"children-banner",props:{modelValue:Array},emits:["go"],setup(o,{emit:e}){const n=Te(),t=fe(),a=Et(),s=Ne(),l=R([]);Fe(()=>{l.value=[s.name]}),he(()=>s,i=>{l.value=[i.name]},{deep:!0});const r=i=>{i.meta&&i.meta.type==="L"?window.open(i.path):(n.push(i.path),a.addTag({name:i.name,title:i.meta.title,path:i.path}))};return(i,c)=>{const m=h("a-menu-item"),f=h("a-menu"),p=h("a-layout-content");return v(),$(p,{class:"sys-menus"},{default:d(()=>[u(f,{ref:"MaMenuRef",mode:"horizontal",class:"layout-banner-menu hidden lg:flex","popup-max-height":360,"selected-keys":l.value},{default:d(()=>[(v(!0),V(Z,null,Ce(o.modelValue,g=>(v(),V(Z,{key:g.id},[g.meta.hidden?q("",!0):(v(),V(Z,{key:0},[!g.children||g.children.length===0?(v(),$(m,{key:g.name,onClick:w=>r(g)},ot({default:d(()=>[A(" "+E(C(t).i18n?i.$t(`menus.${g.name}`).indexOf(".")>0?g.meta.title:i.$t(`menus.${g.name}`):g.meta.title),1)]),_:2},[g.meta.icon?{name:"icon",fn:d(()=>[(v(),$(Pe(g.meta.icon),{class:ie(g.meta.icon.indexOf("ma")>0?"icon":"")},null,8,["class"]))]),key:"0"}:void 0]),1032,["onClick"])):(v(),$(oa,{key:1,"menu-info":g},null,8,["menu-info"]))],64))],64))),128))]),_:1},8,["selected-keys"])]),_:1})}}};const sa=o=>(ln("data-v-a83729b4"),o=o(),rn(),o),la={class:"flex justify-between md:justify-center logo"},ia=sa(()=>x("img",{src:at,class:"bg-white"},null,-1)),ra={class:"ml-2 text-xl mt-2.5 hidden md:block"},ua={class:"flex justify-between w-full layout-banner"},ca={__name:"index",setup(o){const e=Ne();R(null);const n=Oe();fe();const t=R([]);return Fe(()=>{t.value=[e.name]}),he(()=>e,a=>{t.value=[a.name]},{deep:!0}),(a,s)=>{const l=h("a-avatar"),r=h("a-layout-header"),i=h("a-layout");return v(),$(i,{class:"layout flex flex-col h-full"},{default:d(()=>[u(r,{class:"ma-ui-header flex justify-between h-50 layout-banner-header operation-area"},{default:d(()=>[x("div",la,[u(l,{class:"mt-1 ml-2 md:ml-0",size:40},{default:d(()=>[ia]),_:1}),x("span",ra,E(a.$title),1)]),x("div",ua,[u(aa,{modelValue:C(n).routers,"onUpdate:modelValue":s[0]||(s[0]=c=>C(n).routers=c)},null,8,["modelValue"]),u(Ht)])]),_:1}),u(jt,{class:"hidden lg:flex ma-ui-tags"}),u(Ut)]),_:1})}}},da=je(ca,[["__scopeId","data-v-a83729b4"]]),Wt=[{name:"mine",thumb:"/skins-thumb/mine/thumb.jpg"},{name:"businessGray",thumb:"/skins-thumb/businessGray/thumb.jpg"},{name:"city",thumb:"/skins-thumb/city/thumb.jpg"}],fa={class:"flex flex-col"},pa={class:"leading-6"},ma={__name:"skin",setup(o,{expose:e}){const n=R(!1),t=fe(),a=()=>n.value=!0,s=()=>n.value=!1,l=i=>t.useSkin(i),r=Nt(Wt);return e({open:a}),(i,c)=>{const m=h("a-col"),f=h("a-image"),p=h("a-button"),g=h("a-row"),w=h("a-card"),S=h("a-modal");return v(),$(S,{visible:n.value,"onUpdate:visible":c[0]||(c[0]=M=>n.value=M),width:"600px",onCancel:s,footer:!1},{title:d(()=>[A(E(i.$t("sys.changeSkin")),1)]),default:d(()=>[x("div",fa,[(v(!0),V(Z,null,Ce(r,(M,Y)=>(v(),$(w,{key:M.name,class:ie(Y===0?"":"mt-3"),"body-style":{width:"100%",display:"flex",justifyContent:"space-between",padding:"10px"}},{default:d(()=>[u(g,{class:"w-full flex items-center"},{default:d(()=>[u(m,{span:3,class:"flex flex-col text-center"},{default:d(()=>[x("div",pa,E(i.$t(`skin.${M.name}`)),1)]),_:2},1024),u(m,{span:6,class:"flex flex-col text-center"},{default:d(()=>[u(f,{src:M.thumb,class:"rounded border"},null,8,["src"])]),_:2},1024),u(m,{span:12,class:"flex items-center pl-3 pr-3"},{default:d(()=>[A(E(i.$t(`skin.${M.name}Desc`)),1)]),_:2},1024),u(m,{span:3,class:"flex items-center justify-end"},{default:d(()=>[u(p,{type:C(t).skin===M.name?"primary":"secondary",disabled:C(t).skin===M.name,onClick:H=>l(M.name)},{default:d(()=>[A(E(C(t).skin===M.name?i.$t("skin.activated"):i.$t("skin.use")),1)]),_:2},1032,["type","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128))])]),_:1},8,["visible"])}}},ha={class:"title"},ga={class:"title"},_a={__name:"setting",setup(o,{expose:e}){const n=Oe(),t=fe(),{t:a}=Bt(),s=R(null),l=R(!1);R(!1);const r=R(""),i=Nt({mode:t.mode==="dark",tag:t.tag,menuCollapse:t.menuCollapse,menuWidth:t.menuWidth,layout:t.layout,language:t.language,animation:t.animation,i18n:t.i18n}),c=Nt(["#165DFF","#F53F3F","#F77234","#F7BA1E","#00B42A","#14C9C9","#3491FA","#722ED1","#F5319D","#D91AD9","#34C759","#43a047","#7cb342","#c0ca33","#86909c","#6d4c41"]),m=y=>{t.changeColor(y.hex)};Wt.map(y=>{y.name===t.skin&&(r.value=a("skin."+y.name))}),he(()=>t.skin,y=>{Wt.map(N=>{N.name===y&&(r.value=a("skin."+N.name))})});const f=()=>l.value=!0,p=()=>l.value=!1,g=y=>t.changeLayout(y),w=y=>t.toggleI18n(y),S=y=>t.changeLanguage(y),M=y=>t.changeAnimation(y),Y=y=>t.toggleMode(y?"dark":"light"),H=y=>t.toggleTag(y),K=y=>t.toggleMenu(y),P=y=>t.changeMenuWidth(y);he(()=>t.menuCollapse,y=>i.menuCollapse=y);const se=async y=>{const N={mode:t.mode,tag:t.tag,menuCollapse:t.menuCollapse,menuWidth:t.menuWidth,layout:t.layout,skin:t.skin,i18n:t.i18n,language:t.language,animation:t.animation,color:t.color};Vn.updateInfo({id:n.user.id,backend_setting:N}).then(Q=>{Q.success&&un.success(Q.message)}),y(!0)};return e({open:f}),(y,N)=>{const Q=h("a-divider"),b=h("a-row"),O=h("a-button"),T=h("a-form-item"),W=h("a-option"),U=h("a-select"),ee=h("a-switch"),pe=h("a-input-number"),re=h("a-form"),we=h("a-drawer");return v(),V(Z,null,[u(we,{class:"backend-setting",visible:l.value,"onUpdate:visible":N[9]||(N[9]=B=>l.value=B),"on-before-ok":se,width:"350px","ok-text":y.$t("sys.saveToBackend"),onCancel:p,unmountOnClose:""},{title:d(()=>[A(E(y.$t("sys.backendSettingTitle")),1)]),default:d(()=>[u(re,{model:i,"auto-label-width":!0},{default:d(()=>[u(b,{class:"flex justify-center mb-5"},{default:d(()=>[u(Q,{orientation:"center"},{default:d(()=>[x("span",ha,E(y.$t("sys.systemPrimaryColor")),1)]),_:1}),u(C(Mn),{theme:"dark",color:C(t).color,"sucker-hide":!0,"colors-default":c,onChangeColor:m,style:{width:"218px"}},null,8,["color","colors-default"])]),_:1}),u(Q,{orientation:"center"},{default:d(()=>[x("span",ga,E(y.$t("sys.personalizedConfig")),1)]),_:1}),u(T,{label:y.$t("sys.skin"),help:y.$t("sys.skinHelp")},{default:d(()=>[A(E(r.value)+" ",1),u(O,{type:"primary",status:"success",size:"mini",class:"ml-2",onClick:N[0]||(N[0]=B=>s.value.open())},{default:d(()=>[A(E(y.$t("sys.changeSkin")),1)]),_:1})]),_:1},8,["label","help"]),u(T,{label:y.$t("sys.layouts"),help:y.$t("sys.layoutsHelp")},{default:d(()=>[u(U,{modelValue:i.layout,"onUpdate:modelValue":N[1]||(N[1]=B=>i.layout=B),onChange:g},{default:d(()=>[u(W,{value:"classic"},{default:d(()=>[A(E(y.$t("sys.layout.classic")),1)]),_:1}),u(W,{value:"columns"},{default:d(()=>[A(E(y.$t("sys.layout.columns")),1)]),_:1}),u(W,{value:"banner"},{default:d(()=>[A(E(y.$t("sys.layout.banner")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"]),u(T,{label:y.$t("sys.i18n"),help:y.$t("sys.i18nHelp")},{default:d(()=>[u(ee,{modelValue:i.i18n,"onUpdate:modelValue":N[2]||(N[2]=B=>i.i18n=B),onChange:w},null,8,["modelValue"])]),_:1},8,["label","help"]),i.i18n?(v(),$(T,{key:0,label:y.$t("sys.language"),help:y.$t("sys.languageHelp")},{default:d(()=>[u(U,{modelValue:i.language,"onUpdate:modelValue":N[3]||(N[3]=B=>i.language=B),onChange:S},{default:d(()=>[u(W,{value:"zh_CN"},{default:d(()=>[A(E(y.$t("sys.chinese")),1)]),_:1}),u(W,{value:"en"},{default:d(()=>[A(E(y.$t("sys.english")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"])):q("",!0),u(T,{label:y.$t("sys.animation"),help:y.$t("sys.animationHelp")},{default:d(()=>[u(U,{modelValue:i.animation,"onUpdate:modelValue":N[4]||(N[4]=B=>i.animation=B),onChange:M},{default:d(()=>[u(W,{value:"ma-fade"},{default:d(()=>[A(E(y.$t("sys.animate.fade")),1)]),_:1}),u(W,{value:"ma-slide-left"},{default:d(()=>[A(E(y.$t("sys.animate.sliderLeft")),1)]),_:1}),u(W,{value:"ma-slide-right"},{default:d(()=>[A(E(y.$t("sys.animate.sliderRight")),1)]),_:1}),u(W,{value:"ma-slide-down"},{default:d(()=>[A(E(y.$t("sys.animate.sliderDown")),1)]),_:1}),u(W,{value:"ma-slide-up"},{default:d(()=>[A(E(y.$t("sys.animate.sliderUp")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label","help"]),r.value==="Mine"?(v(),$(T,{key:1,label:y.$t("sys.dark"),help:y.$t("sys.darkHelp")},{default:d(()=>[u(ee,{modelValue:i.mode,"onUpdate:modelValue":N[5]||(N[5]=B=>i.mode=B),onChange:Y},null,8,["modelValue"])]),_:1},8,["label","help"])):q("",!0),u(T,{label:y.$t("sys.tag"),help:y.$t("sys.tagHelp")},{default:d(()=>[u(ee,{modelValue:i.tag,"onUpdate:modelValue":N[6]||(N[6]=B=>i.tag=B),onChange:H},null,8,["modelValue"])]),_:1},8,["label","help"]),i.layout!=="banner"?(v(),$(T,{key:2,label:y.$t("sys.menuFold"),help:y.$t("sys.menuFoldHelp")},{default:d(()=>[u(ee,{modelValue:i.menuCollapse,"onUpdate:modelValue":N[7]||(N[7]=B=>i.menuCollapse=B),onChange:K},null,8,["modelValue"])]),_:1},8,["label","help"])):q("",!0),i.layout!=="banner"?(v(),$(T,{key:3,label:y.$t("sys.menuWidth"),help:y.$t("sys.menuWidthHelp")},{default:d(()=>[u(pe,{modelValue:i.menuWidth,"onUpdate:modelValue":N[8]||(N[8]=B=>i.menuWidth=B),mode:"button",onChange:P},null,8,["modelValue"])]),_:1},8,["label","help"])):q("",!0)]),_:1},8,["model"])]),_:1},8,["visible","ok-text"]),u(ma,{ref_key:"skin",ref:s},null,512)],64)}}},va={class:"block lg:hidden button-menu"},ya={__name:"ma-buttonMenu",setup(o){const e=Oe(),n=R(!1);return(t,a)=>{const s=h("icon-close"),l=h("icon-menu"),r=h("a-menu"),i=h("a-trigger");return v(),V("div",va,[u(i,{trigger:["click"],clickToClose:"",position:"top",popupVisible:n.value,"onUpdate:popupVisible":a[1]||(a[1]=c=>n.value=c)},{content:d(()=>[u(r,{mode:"popButton",showCollapseButton:"","popup-max-height":360},{default:d(()=>[u(Cn,{modelValue:C(e).routers,"onUpdate:modelValue":a[0]||(a[0]=c=>C(e).routers=c)},null,8,["modelValue"])]),_:1})]),default:d(()=>[x("div",{class:ie(`button-trigger ${n.value?"button-trigger-active":""}`)},[n.value?(v(),$(s,{key:0})):(v(),$(l,{key:1}))],2)]),_:1},8,["popupVisible"])])}}},Ma={__name:"index",setup(o){const e=fe();Oe();const n=R();he(()=>e.settingOpen,a=>{a===!0&&(n.value.open(),e.settingOpen=!1)});const t=()=>{document.getElementById("app").classList.remove("max-size")};return(a,s)=>{const l=h("icon-close"),r=h("a-layout-content");return v(),$(r,{class:"h-full main-container"},{default:d(()=>[C(e).layout==="columns"?(v(),$(Uo,{key:0})):q("",!0),C(e).layout==="classic"?(v(),$(ta,{key:1})):q("",!0),C(e).layout==="banner"?(v(),$(da,{key:2})):q("",!0),u(_a,{ref_key:"settingRef",ref:n},null,512),u(ya),x("div",{class:"max-size-exit",onClick:t},[u(l)])]),_:1})}}};export{Ma as default};
