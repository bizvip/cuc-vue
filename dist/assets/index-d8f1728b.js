import{m as p}from"./monitor-fc83cd45.js";import{e as O}from"./common-baf76827.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{$ as B}from"./request-372f441e.js";import{r as u,v as R,i as n,o as $,j as A,k as t,a as i,p as e,s as a,u as _,a_ as K,aY as T}from"./runtime-core.esm-bundler-0dd628d9.js";import"./index-4717f23d.js";const z=d=>(K("data-v-9a16031f"),d=d(),T(),d),D={class:"ma-content-block lg:flex p-4"},F={class:"flex justify-between w-full redis-info mt-3"},M={class:"echarts hidden lg:block"},U={class:"ma-content-block p-4 mt-3"},Y=z(()=>i("div",{class:"text-base"},"缓存数据管理",-1)),q={class:"mt-5 lg:flex justify-between"},E={name:"system:cache"},G=Object.assign(E,{setup(d){const f=u({}),o=u({}),v=u([]),m=u(""),h=R([{title:"缓存键名",dataIndex:"name"},{title:"操作",slotName:"operation",width:150,align:"right"}]),y=async l=>{const s=await p.view({key:l});m.value=s.data.content},b=async l=>{const s=await p.deleteKey({key:l.name});s.success&&(B.success(s.message),O())};return(async()=>{const l=await p.getCacheInfo();o.value=l.data.server,l.data.keys.map(s=>{v.value.push({name:s})}),f.value={tooltip:{formatter:"{b} : {c} kb"},series:[{name:"内存占用情况",type:"gauge",min:0,max:5*1024,progress:{show:!0},detail:{valueAnimation:!0,formatter:"{value}"},data:[{value:parseInt(l.data.server.use_memory),name:"Redis占用内存"}]}]}})(),(l,s)=>{const c=n("a-descriptions-item"),k=n("a-descriptions"),w=n("ma-chart"),g=n("a-link"),x=n("a-popconfirm"),I=n("a-space"),C=n("a-table"),V=n("a-textarea"),j=n("a-layout-content");return $(),A(j,null,{default:t(()=>[i("div",D,[i("div",F,[e(k,{column:2,size:"large",bordered:"",title:"Redis信息",class:"lg:w-10/12 w-full"},{default:t(()=>[e(c,{label:"Redis版本"},{default:t(()=>[a(_(o.value.version),1)]),_:1}),e(c,{label:"客户端连接数"},{default:t(()=>[a(_(o.value.clients),1)]),_:1}),e(c,{label:"运行模式"},{default:t(()=>[a(_(o.value.redis_mode),1)]),_:1}),e(c,{label:"运行天数"},{default:t(()=>[a(_(o.value.run_days),1)]),_:1}),e(c,{label:"端口"},{default:t(()=>[a(_(o.value.port),1)]),_:1}),e(c,{label:"AOF状态"},{default:t(()=>[a(_(o.value.aof_enabled),1)]),_:1}),e(c,{label:"已过期key"},{default:t(()=>[a(_(o.value.expired_keys),1)]),_:1}),e(c,{label:"系统使用key"},{default:t(()=>[a(_(o.value.sys_total_keys),1)]),_:1})]),_:1}),i("div",M,[e(w,{options:f.value,width:"330px",height:"330px"},null,8,["options"])])])]),i("div",U,[Y,i("div",q,[e(C,{class:"lg:w-8/12 w-full",data:v.value,columns:h},{operation:t(({record:r})=>[e(I,null,{default:t(()=>[e(g,{onClick:N=>y(r.name)},{default:t(()=>[a("查看")]),_:2},1032,["onClick"]),e(x,{content:"确实要删除该缓存吗?",position:"bottom",onOk:N=>b(r)},{default:t(()=>[e(g,null,{default:t(()=>[a("删除")]),_:1})]),_:2},1032,["onOk"])]),_:2},1024)]),_:1},8,["data","columns"]),e(V,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=r=>m.value=r),class:"lg:w-4/12 w-full lg:ml-5 mt-3 lg:mt-0",readonly:""},null,8,["modelValue"])])])]),_:1})}}}),Z=S(G,[["__scopeId","data-v-9a16031f"]]);export{Z as default};
