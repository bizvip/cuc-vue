import{C as be,$ as M}from"./request-372f441e.js";import{g as S}from"./generate-742dd580.js";import{d as ye}from"./dataMaintain-8604fbb6.js";import{c as xe}from"./common-fa9d7b0c.js";import{m as Ve}from"./menu-1a9c7001.js";import{r as we}from"./role-e97fee2c.js";import{d as ge}from"./dict-cf8ba1b0.js";import he from"./settingComponent-be1565fa.js";import{_ as Ue}from"./_plugin-vue_export-helper-c27b6911.js";import{r as v,i as s,o as m,j as V,k as a,s as i,u as f,p as l,c as y,F as w,L as g,a as _,l as j,G as ke,a_ as Te,aY as qe}from"./runtime-core.esm-bundler-0dd628d9.js";const Ie=[{name:"新增",value:"save",comment:"勾选生成新增数据按钮菜单及接口"},{name:"更新",value:"update",comment:"勾选生成更新数据按钮菜单及接口"},{name:"读取",value:"read",comment:"勾选生成读取数据按钮菜单及接口"},{name:"删除",value:"delete",comment:"勾选生成真实删除按钮菜单及接口"},{name:"回收站列表",value:"recycle",comment:"勾选生成移到回收站列表、真实删除、恢复菜单及接口，确定该表有deleted_at字段，且模型引入了软删除。"},{name:"修改状态",value:"changeStatus",comment:"勾选生成修改状态按钮菜单及接口，该接口用于单个字段状态修改"},{name:"自增自减",value:"numberOperation",comment:"勾选生成数据自增自减按钮菜单及接口，该接口用于单个字段增减操作"},{name:"导入",value:"import",comment:"勾选生成导入按钮菜单、接口和DTO文件"},{name:"导出",value:"export",comment:"勾选生成导出按钮菜单、接口和DTO文件"}],Ne=[{name:"一对一",value:"hasOne"},{name:"一对多",value:"hasMany"},{name:"一对多（反向)",value:"belongsTo"},{name:"多对多",value:"belongsToMany"}],Ce=[{title:"排序",dataIndex:"sort",slotName:"sort",width:100},{title:"字段名称",dataIndex:"column_name",slotName:"columnName",width:150,tooltip:!0},{title:"字段描述",dataIndex:"column_comment",slotName:"columnComment",width:180},{title:"物理类型",dataIndex:"column_type",slotName:"columnType",width:120},{title:"必填",dataIndex:"is_required",slotName:"isRequired",width:80},{title:"插入",dataIndex:"is_insert",slotName:"isInsert",width:80},{title:"编辑",dataIndex:"is_edit",slotName:"isEdit",width:80},{title:"列表",dataIndex:"is_list",slotName:"isList",width:80},{title:"查询",dataIndex:"is_query",slotName:"isQuery",width:80},{title:"排序",dataIndex:"is_sort",slotName:"isSort",width:80},{title:"查询方式",dataIndex:"query_type",slotName:"queryType",width:180},{title:"页面控件",dataIndex:"view_type",slotName:"viewType",width:240},{title:"数据字典",dataIndex:"dict_type",slotName:"dictType",width:180},{title:"允许角色",dataIndex:"allow_roles",slotName:"allowRoles",width:200}],Se=[{label:"=",value:"eq"},{label:"!=",value:"neq"},{label:">",value:"gt"},{label:">=",value:"gte"},{label:"<",value:"lt"},{label:"<=",value:"lte"},{label:"LIKE",value:"like"},{label:"IN",value:"in"},{label:"NOT IN",value:"notin"},{label:"BETWEEN",value:"between"}],De=[{label:"输入框",value:"text"},{label:"密码框",value:"password"},{label:"文本域",value:"textarea"},{label:"数字输入框",value:"inputNumber"},{label:"标签输入框",value:"inputTag"},{label:"提及",value:"mention"},{label:"开关",value:"switch"},{label:"滑块",value:"slider"},{label:"下拉框",value:"select"},{label:"树形下拉框",value:"treeSelect"},{label:"单选框",value:"radio"},{label:"复选框",value:"checkbox"},{label:"日期选择器",value:"date"},{label:"时间选择器",value:"time"},{label:"评分器",value:"rate"},{label:"级联选择器",value:"cascader"},{label:"数据穿梭框",value:"transfer"},{label:"用户选择器",value:"selectUser"},{label:"用户信息",value:"userInfo"},{label:"省市区联动",value:"cityLinkage"},{label:"子表单",value:"formGroup"},{label:"上传组件",value:"upload"},{label:"资源选择器",value:"selectResource"},{label:"富文本控件",value:"editor"},{label:"代码编辑器",value:"codeEditor"}];const Le=N=>(Te("data-v-466c7b87"),N=N(),qe(),N),Re={class:"flex justify-between w-full"},Ke={key:0},Me={class:"flex justify-between w-full"},je={class:"flex justify-between w-full"},Ee={class:"flex justify-between w-full"},Oe={key:1},Be={class:"flex justify-between w-full"},Ge=Le(()=>_("p",null,"数据字典在页面控件为下拉框、单选框、复选框和数据穿梭框才可选择",-1)),Qe={class:"flex justify-between w-full"},$e={class:"flex justify-between w-full"},ze={name:"setting:code:update"},Fe=Object.assign(ze,{setup(N,{expose:Y}){const h=v({}),E=v(!0),D=v(!1),O=v("base_config"),B=v(),H=v(["text","password","textarea","formGroup","inputTag","mention","rate","userInfo"]),t=v({generate_menus:["save","update","read","delete","recycle","changeStatus","numberOperation","import","export"],columns:[]}),G=v(),p=v({relations:[]}),L=v([]),Q=v([]),$=v([]),z=v([]),F=v([]),P=v([]),J=async d=>{D.value=!0;const o=await S.readTable({id:d});h.value=o.data,ae(),E.value=!1},X=(d,o)=>{t.value.columns.find((U,x)=>{U.column_name==d&&(t.value.columns[x].options=o)}),M.success("组件设置成功")},Z=async d=>{const o=await G.value.validate();if(o){for(let x in o)M.error(o[x].message);return!1}t.value.options=p.value;const U=await S.update(t.value);U.success&&M.success(U.message),d(!0)},ee=()=>{p.value.relations.push({name:"",type:"hasOne",model:"",foreignKey:"",localKey:"",table:""})},le=d=>p.value.relations.splice(d,1),ae=()=>{for(let d in h.value)d==="generate_menus"?t.value[d]=h.value[d]?h.value[d].split(","):[]:t.value[d]=h.value[d];h.value.options&&h.value.options.relations?p.value.relations=h.value.options.relations:p.value.relations=[],S.getTableColumns({table_id:h.value.id}).then(d=>{t.value.columns=[],d.data.map(o=>{o.is_required=o.is_required===2,o.is_insert=o.is_insert===2,o.is_edit=o.is_edit===2,o.is_list=o.is_list===2,o.is_query=o.is_query===2,o.is_sort=o.is_sort===2,t.value.columns.push(o)})}),xe.getModuleList().then(d=>P.value=d.data),Ve.tree({onlyMenu:!0}).then(d=>{L.value=d.data,L.value.unshift({id:0,value:0,label:"顶级菜单"})}),we.getList().then(d=>Q.value=d.data),S.getModels().then(d=>z.value=d.data),ye.getPageList({pageSize:999}).then(d=>F.value=d.data.items),ge.getTypeList({pageSize:999}).then(d=>$.value=d.data.items)};return Y({open:J}),(d,o)=>{const U=s("a-divider"),x=s("a-input"),r=s("a-form-item"),c=s("a-col"),te=s("a-textarea"),k=s("a-row"),T=s("a-option"),b=s("a-select"),oe=s("a-cascader"),q=s("a-radio"),R=s("a-radio-group"),C=s("a-tab-pane"),A=s("a-tag"),K=s("a-alert"),ue=s("a-input-number"),I=s("a-checkbox"),W=s("a-link"),ne=s("a-space"),de=s("a-table"),se=s("a-checkbox-group"),me=s("icon-plus"),ie=s("a-button"),re=s("icon-delete"),ce=s("a-tabs"),_e=s("a-form"),pe=s("a-spin"),fe=s("a-modal");return m(),V(fe,{visible:D.value,"onUpdate:visible":o[19]||(o[19]=e=>D.value=e),"on-before-ok":Z,fullscreen:"","unmount-on-close":""},{title:a(()=>{var e;return[i("编辑生成信息 - "+f((e=h.value)==null?void 0:e.table_comment),1)]}),default:a(()=>[l(pe,{loading:E.value,tip:"加载数据中...",class:"w-full"},{default:a(()=>[l(_e,{model:t.value,ref_key:"formRef",ref:G},{default:a(()=>[l(ce,{"active-key":O.value,"onUpdate:activeKey":o[18]||(o[18]=e=>O.value=e)},{default:a(()=>[l(C,{title:"配置信息",key:"base_config"},{default:a(()=>[l(U,{orientation:"left"},{default:a(()=>[i("基础信息")]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"表名称",field:"table_name","label-col-flex":"auto","label-col-style":{width:"100px"}},{default:a(()=>[l(x,{modelValue:t.value.table_name,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value.table_name=e),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"表描述",field:"table_comment","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"表描述必填"}]},{default:a(()=>[l(x,{modelValue:t.value.table_comment,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value.table_comment=e)},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:24,xl:24},{default:a(()=>[l(r,{label:"备注信息",field:"remark","label-col-flex":"auto","label-col-style":{width:"94px"}},{default:a(()=>[l(te,{modelValue:t.value.remark,"onUpdate:modelValue":o[2]||(o[2]=e=>t.value.remark=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(U,{orientation:"left"},{default:a(()=>[i("生成信息")]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"所属模块",field:"module_name","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"所属模块必选"}],extra:"所属模块请对应表模块前缀，否则会生成失败，且在安装模块时，数据迁移文件会被忽略"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:t.value.module_name,"onUpdate:modelValue":o[3]||(o[3]=e=>t.value.module_name=e),"allow-clear":"","allow-search":"",placeholder:"请选择所属模块"},{default:a(()=>[(m(!0),y(w,null,g(P.value,(e,u)=>(m(),V(T,{class:"w-full",label:e.name,value:e.name,key:u},{default:a(()=>[_("div",Re,[_("span",null,f(e.name),1),_("span",null,f(e.label),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"所属菜单",field:"belong_menu_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"分配业务功能在哪个菜单，例如：权限管理。不选择则为顶级菜单"},{default:a(()=>[l(oe,{modelValue:t.value.belong_menu_id,"onUpdate:modelValue":o[4]||(o[4]=e=>t.value.belong_menu_id=e),options:L.value,"expand-trigger":"hover",style:{width:"100%"},placeholder:"生成功能所属菜单","allow-search":"","allow-clear":"","check-strictly":""},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"生成类型",field:"type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"单表须有主键，树表须指定id、parent_id、name等字段"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:t.value.type,"onUpdate:modelValue":o[5]||(o[5]=e=>t.value.type=e),options:[{label:"单表增删改查",value:"single"},{label:"树表增删改查",value:"tree"}],"allow-clear":"","allow-search":"",placeholder:"请选择所属模块"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"菜单名称",field:"menu_name","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"菜单名称必选"}],extra:"显示在左侧菜单上的名称、以及以及代码中的业务名称"},{default:a(()=>[l(x,{"allow-clear":"",modelValue:t.value.menu_name,"onUpdate:modelValue":o[6]||(o[6]=e=>t.value.menu_name=e),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"包名",field:"package_name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定控制器文件所在控制器目录的二级目录名，如：Premission"},{default:a(()=>[l(x,{"allow-clear":"",modelValue:t.value.package_name,"onUpdate:modelValue":o[7]||(o[7]=e=>t.value.package_name=e),placeholder:"请输入包名"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"生成方式",field:"generate_type","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"菜单名称必选"}],extra:"如选择生成到目录，只会对后端文件进行到目录生成（覆盖形式），前端文件和菜单SQL还以压缩包方式下载"},{default:a(()=>[l(R,{"model-value":t.value.generate_type,"onUpdate:modelValue":o[8]||(o[8]=e=>t.value.generate_type=e),type:"button"},{default:a(()=>[l(q,{value:1},{default:a(()=>[i("压缩包下载")]),_:1}),l(q,{value:2},{default:a(()=>[i("生成到目录")]),_:1})]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"组件样式",field:"component_type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"设置新增和修改组件显示方式，Tag页表示新打开的一个标签来显示新增和编辑"},{default:a(()=>[l(R,{"model-value":t.value.component_type,"onUpdate:modelValue":o[9]||(o[9]=e=>t.value.component_type=e),type:"button"},{default:a(()=>[l(q,{value:1},{default:a(()=>[i("模态框")]),_:1}),l(q,{value:2},{default:a(()=>[i("抽屉")]),_:1}),l(q,{value:3},{default:a(()=>[i("Tag页")]),_:1})]),_:1},8,["model-value"])]),_:1})]),_:1}),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"构建菜单",field:"build_menu","label-col-flex":"auto","label-col-style":{width:"100px"},rules:[{required:!0,message:"菜单名称必选"}],extra:"如选择构建菜单，在每次生成代码都会进行生成菜单操作。"},{default:a(()=>[l(R,{"model-value":t.value.build_menu,"onUpdate:modelValue":o[10]||(o[10]=e=>t.value.build_menu=e),type:"button"},{default:a(()=>[l(q,{value:1},{default:a(()=>[i("不构建菜单")]),_:1}),l(q,{value:2},{default:a(()=>[i("构建菜单")]),_:1})]),_:1},8,["model-value"])]),_:1})]),_:1})]),_:1}),t.value.type==="tree"?(m(),y("div",Ke,[l(U,{orientation:"left"},{default:a(()=>[i("树表配置")]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"树主ID",field:"tree_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树表的主要ID，一般为主键"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:p.value.tree_id,"onUpdate:modelValue":o[11]||(o[11]=e=>p.value.tree_id=e),"allow-clear":"","allow-search":"",placeholder:"请选择树表的主ID"},{default:a(()=>[(m(!0),y(w,null,g(t.value.columns,(e,u)=>(m(),V(T,{class:"w-full",label:e.column_name+" - "+e.column_comment,value:e.column_name,key:u},{default:a(()=>[_("div",Me,[_("span",null,f(e.column_name),1),_("span",null,f(e.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"树父ID",field:"tree_parent_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树表的父ID，比如：parent_id"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:p.value.tree_parent_id,"onUpdate:modelValue":o[12]||(o[12]=e=>p.value.tree_parent_id=e),"allow-clear":"","allow-search":"",placeholder:"请选择树表的父ID"},{default:a(()=>[(m(!0),y(w,null,g(t.value.columns,(e,u)=>(m(),V(T,{class:"w-full",label:e.column_name+" - "+e.column_comment,value:e.column_name,key:u},{default:a(()=>[_("div",je,[_("span",null,f(e.column_name),1),_("span",null,f(e.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"树名称",field:"tree_name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定树显示的名称字段，比如：name"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:p.value.tree_name,"onUpdate:modelValue":o[13]||(o[13]=e=>p.value.tree_name=e),"allow-clear":"","allow-search":"",placeholder:"请选择树表的主ID"},{default:a(()=>[(m(!0),y(w,null,g(t.value.columns,(e,u)=>(m(),V(T,{class:"w-full",label:e.column_name+" - "+e.column_comment,value:e.column_name,key:u},{default:a(()=>[_("div",Ee,[_("span",null,f(e.column_name),1),_("span",null,f(e.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])):j("",!0),t.value.component_type===3?(m(),y("div",Oe,[l(U,{orientation:"left"},{default:a(()=>[i("Tag页配置")]),_:1}),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"标签页ID",field:"tag_id","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定标签页的ID，要保证全局唯一性"},{default:a(()=>[l(x,{modelValue:p.value.tag_id,"onUpdate:modelValue":o[14]||(o[14]=e=>p.value.tag_id=e),placeholder:"请输入标签页ID"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"标签页名称",field:"tag_name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定标签的显示内容，注意：在打开标签后，会在标签前面加上新增或编辑"},{default:a(()=>[l(x,{modelValue:p.value.tag_name,"onUpdate:modelValue":o[15]||(o[15]=e=>p.value.tag_name=e),placeholder:"请输入标签页名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{xs:24,md:8,xl:8},{default:a(()=>[l(r,{label:"标签显示字段",field:"tag_view_name","label-col-flex":"auto","label-col-style":{width:"120px"},extra:"在标签后面显示某个字段的值，一般指定 title 或者 name 等字段"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:p.value.tag_view_name,"onUpdate:modelValue":o[16]||(o[16]=e=>p.value.tag_view_name=e),"allow-clear":"","allow-search":"",placeholder:"请选择标签显示字段"},{default:a(()=>[(m(!0),y(w,null,g(t.value.columns,(e,u)=>(m(),V(T,{class:"w-full",label:e.column_name+" - "+e.column_comment,value:e.column_name,key:u},{default:a(()=>[_("div",Be,[_("span",null,f(e.column_name),1),_("span",null,f(e.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])):j("",!0)]),_:1}),l(C,{title:"字段配置",key:"field_config"},{default:a(()=>[l(K,{title:"提示"},{default:a(()=>[i(" 使用数组形式字段的组件，请在模型的 "),l(A,{color:"#168cff"},{default:a(()=>[i("casts")]),_:1}),i(" 设置相应字段为 "),l(A,{color:"#168cff"},{default:a(()=>[i("array")]),_:1}),i(" 类型 "),Ge]),_:1}),l(de,{data:t.value.columns,columns:Ce,pagination:!1,class:"mt-3"},{sort:a(({rowIndex:e})=>[l(ue,{modelValue:t.value.columns[e].sort,"onUpdate:modelValue":u=>t.value.columns[e].sort=u},null,8,["modelValue","onUpdate:modelValue"])]),columnComment:a(({rowIndex:e})=>[l(x,{modelValue:t.value.columns[e].column_comment,"onUpdate:modelValue":u=>t.value.columns[e].column_comment=u,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue"])]),isRequired:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_required,"onUpdate:modelValue":u=>t.value.columns[e].is_required=u},null,8,["modelValue","onUpdate:modelValue"])]),isInsert:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_insert,"onUpdate:modelValue":u=>t.value.columns[e].is_insert=u},null,8,["modelValue","onUpdate:modelValue"])]),isEdit:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_edit,"onUpdate:modelValue":u=>t.value.columns[e].is_edit=u},null,8,["modelValue","onUpdate:modelValue"])]),isList:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_list,"onUpdate:modelValue":u=>t.value.columns[e].is_list=u},null,8,["modelValue","onUpdate:modelValue"])]),isQuery:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_query,"onUpdate:modelValue":u=>t.value.columns[e].is_query=u},null,8,["modelValue","onUpdate:modelValue"])]),isSort:a(({rowIndex:e})=>[l(I,{modelValue:t.value.columns[e].is_sort,"onUpdate:modelValue":u=>t.value.columns[e].is_sort=u},null,8,["modelValue","onUpdate:modelValue"])]),queryType:a(({rowIndex:e})=>[l(b,{modelValue:t.value.columns[e].query_type,"onUpdate:modelValue":u=>t.value.columns[e].query_type=u,options:Se,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","options"])]),viewType:a(({record:e,rowIndex:u})=>[l(ne,null,{default:a(()=>[l(b,{modelValue:t.value.columns[u].view_type,"onUpdate:modelValue":n=>t.value.columns[u].view_type=n,style:{width:"160px"},options:De,"allow-clear":""},null,8,["modelValue","onUpdate:modelValue","options"]),H.value.includes(e.view_type)?j("",!0):(m(),V(W,{key:0,onClick:n=>B.value.open(e)},{default:a(()=>[i("设置")]),_:2},1032,["onClick"]))]),_:2},1024)]),dictType:a(({record:e,rowIndex:u})=>[l(b,{modelValue:t.value.columns[u].dict_type,"onUpdate:modelValue":n=>t.value.columns[u].dict_type=n,options:$.value,"allow-clear":"","field-names":{label:"name",value:"code"},placeholder:"选择数据字典",disabled:!["select","radio","checkbox","transfer"].includes(e.view_type)},null,8,["modelValue","onUpdate:modelValue","options","disabled"])]),allowRoles:a(({rowIndex:e})=>[l(b,{modelValue:t.value.columns[e].allow_roles,"onUpdate:modelValue":u=>t.value.columns[e].allow_roles=u,multiple:"",options:Q.value,"max-tag-count":1,"allow-clear":"","field-names":{label:"name",value:"code"},placeholder:"选择允许查看字段的角色"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:1},8,["data","columns"])]),_:1}),l(C,{title:"菜单配置",key:"menu_config"},{default:a(()=>[l(K,{title:"提示"},{default:a(()=>[i("未选择的菜单，后端也对应不生成方法。注意：列表按钮菜单是默认的")]),_:1}),l(se,{direction:"vertical",modelValue:t.value.generate_menus,"onUpdate:modelValue":o[17]||(o[17]=e=>t.value.generate_menus=e),class:"mt-3","default-value":t.value.generate_menus},{default:a(()=>[(m(!0),y(w,null,g(Ie,(e,u)=>(m(),V(I,{value:e.value,key:u},{default:a(()=>[i(f(e.name+"　-　"+e.comment),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","default-value"])]),_:1}),l(C,{title:"关联配置",key:"relation_config"},{default:a(()=>[l(K,{title:"提示"},{default:a(()=>[i("模型关联支持：一对一、一对多、一对多（反向）、多对多。")]),_:1}),l(ie,{onClick:ee,type:"primary",class:"mt-3"},{default:a(()=>[l(me),i(" 新增关联")]),_:1}),(m(!0),y(w,null,g(p.value.relations,(e,u)=>(m(),y("div",{key:u},[l(U,{orientation:"left"},{default:a(()=>[i(f(e.name?e.name:"定义新关联")+" ",1),l(W,{onClick:n=>le(u),class:"ml-5"},{default:a(()=>[l(re),i(" 删除定义")]),_:2},1032,["onClick"])]),_:2},1024),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"关联类型",field:"type","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"指定关联类型"},{default:a(()=>[l(b,{modelValue:e.type,"onUpdate:modelValue":n=>e.type=n,"allow-clear":"","allow-search":"",placeholder:"请选择关联类型"},{default:a(()=>[(m(!0),y(w,null,g(Ne,n=>(m(),V(T,{key:n.value,value:n.value,label:n.name},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"关联名称",field:"name","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"设置关联名称，且是代码中调用的名称"},{default:a(()=>[l(x,{modelValue:e.name,"onUpdate:modelValue":n=>e.name=n,"allow-clear":"",placeholder:"设置关联名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(k,{gutter:24},{default:a(()=>[l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"关联模型",field:"model","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"选择要关联的模型"},{default:a(()=>[l(b,{modelValue:e.model,"onUpdate:modelValue":n=>e.model=n,"allow-clear":"","allow-search":"",placeholder:"请选择关联模型，可输入关键字过滤"},{default:a(()=>[(m(!0),y(w,null,g(z.value,n=>(m(),V(T,{key:n,value:n,label:n},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"关联键",field:"localKey","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"关联键，是指本表的外键"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:e.localKey,"onUpdate:modelValue":n=>e.localKey=n,"allow-clear":"","allow-search":"",placeholder:"请选择关联键，可输入关键字过滤"},{default:a(()=>[(m(!0),y(w,null,g(t.value.columns,(n,ve)=>(m(),V(T,{class:"w-full",label:n.column_name+" - "+n.column_comment,value:n.column_name,key:ve},{default:a(()=>[_("div",Qe,[_("span",null,f(n.column_name),1),_("span",null,f(n.column_comment),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(k,{gutter:24},{default:a(()=>[ke(l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:"中间表名称",field:"model","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"多对多的中间表，一般直接指定表的名称"},{default:a(()=>[l(b,{style:{width:"100%"},modelValue:e.table,"onUpdate:modelValue":n=>e.table=n,"allow-clear":"","allow-search":"",placeholder:"请选择中间表，可输入关键字过滤"},{default:a(()=>[(m(!0),y(w,null,g(F.value,n=>(m(),V(T,{class:"w-full",key:n.name,label:n.name+" - "+n.comment,value:n.name},{default:a(()=>[_("div",$e,[_("span",null,f(n.name),1),_("span",null,f(n.comment),1)])]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1536),[[be,e.type==="belongsToMany"]]),l(c,{xs:24,md:12,xl:12},{default:a(()=>[l(r,{label:e.type==="belongsToMany"?"中间表外键":"外键",field:"foreignKey","label-col-flex":"auto","label-col-style":{width:"100px"},extra:"关联表外键或中间表的外键"},{default:a(()=>[l(x,{style:{width:"100%"},modelValue:e.foreignKey,"onUpdate:modelValue":n=>e.foreignKey=n,"allow-clear":"",placeholder:e.type==="belongsToMany"?"中间表外键名称":"关联表外键名称"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1024)]))),128))]),_:1})]),_:1},8,["active-key"])]),_:1},8,["model"])]),_:1},8,["loading"]),l(he,{ref_key:"settingComponentRef",ref:B,onConfrim:X},null,512)]),_:1},8,["visible"])}}}),al=Ue(Fe,[["__scopeId","data-v-466c7b87"]]);export{al as default};
