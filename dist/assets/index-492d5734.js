import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{r as u,e as V,w,c as C,p as d,k as f,C as K,B as A,i,o as m,s as B,u as D,j as T,H as j}from"./runtime-core.esm-bundler-0dd628d9.js";const M={class:"flex flex-col w-full h-full"},O={__name:"index",props:{modelValue:{type:Array},searchPlaceholder:{type:String},selectedKeys:{type:Array},fieldNames:{type:Object,default:()=>({title:"label",value:"code"})},icon:{type:String,default:void 0}},emits:["click"],setup(v,{expose:y,emit:h}){const e=v,s=u([]),o=u([]),c=u(),r=u(!1);V(()=>o.value=e.selectedKeys),w(()=>e.modelValue,l=>{s.value=l});const x=(l,a)=>{o.value=[l],h("click",l,a)},g=()=>s.value=e.modelValue,k=l=>{if(!l||l==="")return s.value=Object.assign(e.modelValue,[]),!1;s.value=b(l)},b=l=>{const a=p=>{let n=[];return p.map(t=>{if(t.children&&t.children.length>0){const _=a(t.children);n.push(..._)}else t[e.fieldNames.title].indexOf(l)!==-1&&n.push(t);return n}),n};return a(e.modelValue)};return y({maTree:c}),(l,a)=>{const p=i("a-input"),n=i("a-button"),t=i("a-input-group"),_=i("a-tree");return m(),C("div",M,[d(t,{class:"mb-2 w-full",size:"mini"},{default:f(()=>[d(p,{placeholder:e==null?void 0:e.searchPlaceholder,"allow-clear":"",onInput:k,onClear:g},null,8,["placeholder"]),d(n,{onClick:a[0]||(a[0]=()=>{r.value?c.value.expandAll(!1):c.value.expandAll(!0),r.value=!r.value})},{default:f(()=>[B(D(r.value?"折叠":"展开"),1)]),_:1})]),_:1}),d(_,A({blockNode:"",data:s.value,class:"h-full w-full",onSelect:x,"field-names":e.fieldNames,"selected-keys":o.value,"onUpdate:selectedKeys":a[1]||(a[1]=N=>o.value=N),ref_key:"maTree",ref:c},l.$attrs),K({_:2},[e.icon?{name:"icon",fn:f(()=>[(m(),T(j(e.icon)))]),key:"0"}:void 0]),1040,["data","field-names","selected-keys"])])}}},I=S(O,[["__scopeId","data-v-41a925ed"]]);export{I as M};
