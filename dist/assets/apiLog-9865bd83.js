import{m as w}from"./index-d8b0f1c2.js";import{a2 as y}from"./request-372f441e.js";import{f as k}from"./common-baf76827.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{r as u,v as x,i as n,o as R,c as A,p as o,k as l,s as N,a as e,u as i,a_ as T,aY as U}from"./runtime-core.esm-bundler-0dd628d9.js";import"./index-4717f23d.js";const I={getPageList(t={}){return y({url:"system/logs/getApiLogPageList",method:"get",params:t})},deletes(t){return y({url:"system/logs/deleteApiLog",method:"delete",data:t})}};const c=t=>(T("data-v-7d044aae"),t=t(),U(),t),j={class:"ma-content-block lg:flex justify-between pt-4 pl-2 pr-2 pb-2"},z={class:"arco-descriptions arco-descriptions-layout-horizontal arco-descriptions-size-medium arco-descriptions-border"},E={class:"arco-descriptions-body"},J={class:"arco-descriptions-table"},O={class:"arco-descriptions-row"},Y=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"接口名称",-1)),$={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},F={class:"arco-descriptions-row"},G=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"请求接口",-1)),H={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},K={class:"arco-descriptions-row"},M=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"状态代码",-1)),Q={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},W={class:"arco-descriptions-row"},X=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"请求时间",-1)),Z={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ee={class:"arco-descriptions-row"},se=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"访问IP",-1)),te={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},oe={class:"arco-descriptions-row"},ae=c(()=>e("td",{class:"arco-descriptions-item-label arco-descriptions-item-label-block"},"访问地点",-1)),ie={class:"arco-descriptions-item-value arco-descriptions-item-value-block",colspan:"1"},ce={name:"system:apiLog"},le=Object.assign(ce,{setup(t){const L=u(),p=u(!1),s=u({request_data:void 0,response_data:void 0}),q=d=>{s.value=d,s.value.request_data=k(d.request_data),s.value.response_data=k(d.response_data),p.value=!0},V=x({api:I.getPageList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},requestParams:{orderBy:"access_time",orderType:"desc"},delete:{show:!0,api:I.deletes,auth:["system:apiLog:delete"]}}),P=x([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"接口名称",dataIndex:"api_name",search:!0,width:180},{title:"接口地址",dataIndex:"access_name",search:!0,width:180},{title:"访问IP",dataIndex:"ip",width:150,search:!0},{title:"访问地点",dataIndex:"ip_location",width:150},{title:"状态码",dataIndex:"response_code",width:120},{title:"访问时间",dataIndex:"access_time",width:180,search:!0,formType:"range"}]);return(d,a)=>{const C=n("ma-crud"),m=n("a-collapse-item"),D=n("a-collapse"),S=n("a-drawer");return R(),A("div",j,[o(C,{options:V,columns:P,onRowClick:q,ref_key:"crudRef",ref:L},null,8,["options","columns"]),o(S,{visible:p.value,"onUpdate:visible":a[2]||(a[2]=r=>p.value=r),width:"600px",footer:!1},{title:l(()=>[N("接口日志详细信息")]),default:l(()=>{var r,h,v,b,f,g;return[e("div",z,[e("div",E,[e("table",J,[e("tbody",null,[e("tr",O,[Y,e("td",$,i((r=s.value)==null?void 0:r.api_name),1)]),e("tr",F,[G,e("td",H,i((h=s.value)==null?void 0:h.access_name),1)]),e("tr",K,[M,e("td",Q,i((v=s.value)==null?void 0:v.response_code),1)]),e("tr",W,[X,e("td",Z,i((b=s.value)==null?void 0:b.access_time),1)]),e("tr",ee,[se,e("td",te,i((f=s.value)==null?void 0:f.ip),1)]),e("tr",oe,[ae,e("td",ie,i((g=s.value)==null?void 0:g.ip_location),1)])])])])]),o(D,{"default-active-key":["request","response"],"expand-icon-position":"right",class:"mt-3"},{default:l(()=>[o(m,{header:"请求数据",key:"request"},{default:l(()=>[o(w,{modelValue:s.value.request_data,"onUpdate:modelValue":a[0]||(a[0]=_=>s.value.request_data=_),"is-bind":"",height:150,readonly:""},null,8,["modelValue"])]),_:1}),o(m,{header:"响应数据",key:"response"},{default:l(()=>[o(w,{modelValue:s.value.response_data,"onUpdate:modelValue":a[1]||(a[1]=_=>s.value.response_data=_),"is-bind":"",height:150,readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]}),_:1},8,["visible"])])}}}),me=B(le,[["__scopeId","data-v-7d044aae"]]);export{me as default};
