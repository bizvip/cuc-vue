import{a2 as a,$ as k}from"./request-7ebe3d6d.js";import{r as i,v as h,i as c,o as I,j as q,k as m,s as T,u as f,p as v}from"./runtime-core.esm-bundler-0dd628d9.js";const s={getList(e={}){return a({url:"system/apiColumn/index",method:"get",params:e})},getRecycleList(e={}){return a({url:"system/apiColumn/recycle",method:"get",params:e})},save(e={}){return a({url:"system/apiColumn/save",method:"post",data:e})},read(e={}){return a({url:"system/apiColumn/read",method:"post",data:e})},deletes(e){return a({url:"system/apiColumn/delete",method:"delete",data:e})},recoverys(e){return a({url:"system/apiColumn/recovery",method:"put",data:e})},realDeletes(e){return a({url:"system/apiColumn/realDelete",method:"delete",data:e})},update(e,n={}){return a({url:"system/apiColumn/update/"+e,method:"put",data:n})},changeStatus(e={}){return a({url:"system/apiColumn/changeStatus",method:"put",data:e})}},S={__name:"paramsList",setup(e,{expose:n}){const y=i(),p=i(!1),r=i(""),u=i({id:void 0,name:void 0}),_=async(t,l)=>{const o=await s.changeStatus({id:l,status:t});o.success&&k.success(o.message)},x=(t,l)=>{u.value=t,r.value=l,y.value.requestData(),p.value=!0},g=h({autoRequest:!1,api:s.getList,recycleApi:s.getRecycleList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationWidth:300,add:{show:!0,api:s.save,auth:["system:api:save"]},edit:{show:!0,api:s.update,auth:["system:api:update"]},delete:{show:!0,api:s.deletes,auth:["system:api:delete"],realApi:s.realDeletes,realAuth:["system:api:realDeletes"]},import:{show:!0,url:"system/apiColumn/import",templateUrl:"system/apiColumn/downloadTemplate"},export:{show:!0,url:"system/apiColumn/export"},recovery:{show:!0,api:s.recoverys,auth:["system:api:recovery"]},formOption:{width:"800px"},beforeAdd:t=>t.api_id=u.value.id,beforeRequest:t=>{t.api_id=u.value.id,t.type=r.value=="request"?1:2}}),C=h([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50},{title:"字段名称",dataIndex:"name",search:!0,commonRules:[{required:!0,message:"字段名称必填"}],span:12,labelWidth:"120px"},{title:"数据类型",dataIndex:"data_type",formType:"select",commonRules:[{required:!0,message:"数据类型必选"}],dict:{name:"api_data_type",props:{label:"title",value:"key"},translation:!0},span:12,search:!0},{title:"字段类型",dataIndex:"type",disabled:!0,formType:"radio",dict:{data:[{label:"请求",value:1},{label:"响应",value:2}],translation:!0},addDefaultValue:()=>r.value=="request"?1:2,span:8,labelWidth:"140px"},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",span:8},{title:"必填",dataIndex:"is_required",search:!0,dict:{data:[{label:"是",value:2},{label:"否",value:1}],translation:!0},addDefaultValue:2,formType:"radio",span:8,control:t=>t==2?{default_value:{display:!1}}:{default_value:{display:!0}}},{title:"默认值",dataIndex:"default_value",span:24},{title:"字段说明",dataIndex:"description",formType:"editor",hide:!0},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return n({open:x}),(t,l)=>{const o=c("a-switch"),w=c("ma-crud"),b=c("a-modal");return I(),q(b,{visible:p.value,"onUpdate:visible":l[0]||(l[0]=d=>p.value=d),fullscreen:"",footer:!1},{title:m(()=>[T(" 维护 "+f(u.value.name)+" 的"+f(r.value=="request"?"请求参数":"响应参数"),1)]),default:m(()=>[v(w,{options:g,columns:C,ref_key:"crudRef",ref:y},{status:m(({record:d})=>[v(o,{"checked-value":1,"unchecked-value":"2",onChange:D=>_(D,d.id),"default-checked":d.status==1},null,8,["onChange","default-checked"])]),_:1},8,["options","columns"])]),_:1},8,["visible"])}}};export{S as default};
