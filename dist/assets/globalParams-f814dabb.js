import{i as B}from"./index-2e3b1493.js";import{$}from"./request-7ebe3d6d.js";import{r as g,v as N,i as c,o as S,j as T,k as l,s as v,p as e,a as k}from"./runtime-core.esm-bundler-0dd628d9.js";const j={class:"pl-2 pr-2"},D={class:"pl-2 pr-2"},H={class:"pl-2 pr-2"},A={__name:"globalParams",setup(K,{expose:U}){const m=B(),_=g("query"),b=g(!1),o=N({header:[],query:[],body:[]}),C=()=>{P(),b.value=!0},y=()=>{o[_.value].push({name:"",value:""})},f=n=>{o[_.value].splice(n,1)},q=n=>{let i={},p={},u={};o.header.map(d=>{i[d.name]=d.value}),o.query.map(d=>{p[d.name]=d.value}),o.body.map(d=>{u[d.name]=d.value}),m.globalParams={header:i,query:p,body:u},$.success("设置成功"),n(!0)},P=()=>{if(m.globalParams){o.query=[],o.body=[],o.header=[];for(let n in m.globalParams.header)o.header.push({name:n,value:m.globalParams.header[n]});for(let n in m.globalParams.query)o.query.push({name:n,value:m.globalParams.query[n]});for(let n in m.globalParams.body)o.body.push({name:n,value:m.globalParams.body[n]})}};return U({open:C}),(n,i)=>{const p=c("icon-plus"),u=c("a-button"),d=c("icon-delete"),s=c("a-table-column"),r=c("a-input"),V=c("a-table"),h=c("a-tab-pane"),w=c("a-tabs"),x=c("a-modal");return S(),T(x,{visible:b.value,"onUpdate:visible":i[1]||(i[1]=a=>b.value=a),"on-before-ok":q,width:"700px",draggable:"","align-center":!1,top:"50"},{title:l(()=>[v("设置全局参数")]),default:l(()=>[e(w,{type:"rounded","active-key":_.value,"onUpdate:activeKey":i[0]||(i[0]=a=>_.value=a)},{default:l(()=>[e(h,{key:"query",title:"设置全局Query"},{default:l(()=>[k("div",j,[e(u,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:o.query,pagination:!1},{columns:l(()=>[e(s,{title:"#"},{cell:l(({rowIndex:a})=>[e(u,{type:"outline",onClick:t=>f(a)},{icon:l(()=>[e(d)]),_:2},1032,["onClick"])]),_:1}),e(s,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(r,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{title:"值",field:"value"},{cell:l(({record:a})=>[e(r,{modelValue:a.value,"onUpdate:modelValue":t=>a.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(h,{key:"body",title:"设置全局Body"},{default:l(()=>[k("div",D,[e(u,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:o.body,pagination:!1},{columns:l(()=>[e(s,{title:"#"},{cell:l(({rowIndex:a})=>[e(u,{type:"outline",onClick:t=>f(a)},{icon:l(()=>[e(d)]),_:2},1032,["onClick"])]),_:1}),e(s,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(r,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{title:"值",field:"value"},{cell:l(({record:a})=>[e(r,{modelValue:a.value,"onUpdate:modelValue":t=>a.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1}),e(h,{key:"header",title:"设置全局Header"},{default:l(()=>[k("div",H,[e(u,{type:"primary",class:"mb-3",onClick:y},{default:l(()=>[e(p),v(" 新增")]),_:1}),e(V,{data:o.header,pagination:!1},{columns:l(()=>[e(s,{title:"#"},{cell:l(({rowIndex:a})=>[e(u,{type:"outline",onClick:t=>f(a)},{icon:l(()=>[e(d)]),_:2},1032,["onClick"])]),_:1}),e(s,{title:"键名",field:"name"},{cell:l(({record:a})=>[e(r,{modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,"allow-clear":"",placeholder:"请输入键名"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{title:"值",field:"value"},{cell:l(({record:a})=>[e(r,{modelValue:a.value,"onUpdate:modelValue":t=>a.value=t,"allow-clear":"",placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["active-key"])]),_:1},8,["visible"])}}};export{A as default};
