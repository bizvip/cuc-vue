import{u as y}from"./vue-i18n.cjs-ef3fa138.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import{$ as f}from"./request-372f441e.js";import{r as u,e as w,i as x,o as C,j as k,k as b,a as S,S as N}from"./runtime-core.esm-bundler-0dd628d9.js";const P=["width","height"],T={__name:"index",props:{height:{type:Number,default:36},width:{type:Number,default:120},pool:{type:String,default:"abcdefghjkmnpqrstuvwxyz23456789"},size:{type:Number,default:4},showError:{type:Boolean,default:!0}},setup(d,{expose:p}){const t=d,{t:l}=y(),n=u(""),c=u(null),_=e=>!e||e.length===0?(t.showError&&f.error(l("sys.verifyCode.notice")),!1):e.toLowerCase()!==n.value.toLowerCase()?(t.showError&&f.error(l("sys.verifyCode.error")),i(),!1):!0,r=(e,o)=>parseInt(Math.random()*(o-e)+e),a=(e,o)=>{const s=r(e,o),g=r(e,o),v=r(e,o);return`rgb(${s},${g},${v})`},i=()=>{n.value="";const e=c.value.getContext("2d");e.fillStyle=a(230,255),e.fillRect(0,0,t.width,t.height);for(let o=0;o<t.size;o++){let s=""+t.pool[r(0,t.pool.length)];n.value+=s,e.font="36px Simhei",e.textAlign="center",e.fillStyle=a(80,150),e.fillText(s,(o+1)*r(20,25),t.height/2+13)}for(let o=0;o<5;o++)e.beginPath(),e.moveTo(r(0,t.width),r(0,t.height)),e.lineTo(r(0,t.width),r(0,t.height)),e.strokeStyle=a(180,230),e.closePath(),e.stroke();for(let o=0;o<40;o++)e.beginPath(),e.arc(r(0,t.width),r(0,t.height),1,0,2*Math.PI),e.closePath(),e.fillStyle=a(150,200),e.fill();return e.restore(),e.save(),n};w(()=>{i()});const h=()=>{i()};return p({checkResult:_,refresh:h}),(e,o)=>{const s=x("a-tooltip");return C(),k(s,{content:N(l)("sys.verifyCode.switch")},{default:b(()=>[S("canvas",{ref_key:"verfiyCanvas",ref:c,class:"canvas",width:t.width,height:t.height,onClick:h},null,8,P)]),_:1},8,["content"])}}},z=m(T,[["__scopeId","data-v-90afe16e"]]);export{z as v};
