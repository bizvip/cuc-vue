import{m as a}from"./menu-5badf908.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{$ as p}from"./request-7ebe3d6d.js";import{r as m,b as R,v as f,i as d,W as B,o as c,c as A,p as o,k as i,j as y,H as L,l as h,S as M,G as S,s as N}from"./runtime-core.esm-bundler-0dd628d9.js";const O={class:"ma-content-block lg:flex justify-between pt-4 pl-2 pr-2 pb-2"},j={name:"system:menu"},E=Object.assign(j,{setup(q){const l=m();m();let _=R(()=>l.value?l.value.isRecovery:!1);const v=[{label:"菜单",value:"M"},{label:"按钮",value:"B"},{label:"外链",value:"L"},{label:"iFrame",value:"I"}],x=async(e,r)=>{const s=await a.changeStatus({id:r,status:e});s.success&&p.success(s.message)},w=e=>{u[1].addDefaultValue=e,l.value.crudFormRef.add()},k=async(e,r)=>{const s=await a.numberOperation({id:r,numberName:"sort",numberValue:e});s.success&&p.success(s.message)},g=f({api:a.getList,recycleApi:a.getRecycleList,showIndex:!1,pageLayout:"fixed",rowSelection:{showCheckedAll:!0},operationColumn:!0,operationWidth:200,add:{show:!0,api:a.save,auth:["system:menu:save"]},edit:{show:!0,api:a.update,auth:["system:menu:update"]},delete:{show:!0,api:a.deletes,auth:["system:menu:delete"],realApi:a.realDeletes,realAuth:["system:menu:realDeletes"]},recovery:{show:!0,api:a.recoverys,auth:["system:menu:recovery"]},formOption:{viewType:"drawer",width:600},isExpand:!0,beforeOpenAdd:()=>(u[1].addDefaultValue=0,!0)}),u=f([{title:"ID",dataIndex:"id",addDisplay:!1,editDisplay:!1,width:50,hide:!0},{title:"上级菜单",dataIndex:"parent_id",hide:!0,formType:"tree-select",dict:{url:"system/menu/tree",params:{onlyMenu:!0}},addDefaultValue:0,editDefaultValue:e=>e.parent_id==0?void 0:e.parent_id},{title:"菜单名称",dataIndex:"name",search:!0,commonRules:[{required:!0,message:"菜单名称必填"}],width:180},{title:"菜单类型",dataIndex:"type",formType:"radio",addDefaultValue:"M",width:100,dict:{data:v,translation:!0,tagColors:{M:"blue",B:"green",L:"orangered",I:"pinkpurple"}},control:e=>e=="B"?{icon:{display:!1},route:{display:!1},component:{display:!1},redirect:{display:!1},sort:{display:!1},is_hidden:{display:!1},restful:{display:!1}}:e=="I"||e=="L"?{icon:{display:!0},route:{display:!0},component:{display:!1},redirect:{display:!1},sort:{display:!0},is_hidden:{display:!0},restful:{display:!1}}:{icon:{display:!0},route:{display:!0},component:{display:!0},redirect:{display:!0},sort:{display:!0},is_hidden:{display:!0},restful:{display:!0}}},{title:"图标",dataIndex:"icon",width:80,formType:"icon-picker",style:{width:"100%"}},{title:"菜单标识",dataIndex:"code",search:!0,commonRules:[{required:!0,message:"菜单标识必填"}],width:150},{title:"路由地址",dataIndex:"route",width:150},{title:"视图组件",dataIndex:"component",width:200},{title:"重定向",dataIndex:"redirect",hide:!0},{title:"排序",dataIndex:"sort",formType:"input-number",addDefaultValue:1,width:180,min:0,max:1e3},{title:"隐藏",dataIndex:"is_hidden",search:!0,formType:"radio",dict:{data:[{label:"是",value:"1"},{label:"否",value:"2"}],translation:!0},addDefaultValue:"2",editDefaultValue:e=>e.is_hidden.toString(),width:80},{title:"状态",dataIndex:"status",search:!0,formType:"radio",dict:{name:"data_status",props:{label:"title",value:"key"}},addDefaultValue:"1",width:120},{title:"生成按钮",dataIndex:"restful",hide:!0,formType:"radio",dict:{data:[{title:"是",key:"1"},{title:"否",key:"2"}],props:{label:"title",value:"key"}},addDefaultValue:"2",editDisplay:!1},{title:"备注",dataIndex:"remark",hide:!0,formType:"textarea"},{title:"创建时间",dataIndex:"created_at",addDisplay:!1,editDisplay:!1,search:!0,formType:"range",width:180}]);return(e,r)=>{const s=d("a-input-number"),b=d("a-switch"),D=d("icon-plus"),I=d("a-link"),V=d("ma-crud"),C=B("auth");return c(),A("div",O,[o(V,{options:g,columns:u,ref_key:"crudRef",ref:l},{sort:i(({record:t})=>[o(s,{"default-value":t.sort,mode:"button",onChange:n=>k(n,t.id),min:0,max:1e3},null,8,["default-value","onChange"])]),icon:i(({record:t})=>[t.icon?(c(),y(L(t.icon),{key:0})):h("",!0)]),status:i(({record:t})=>[o(b,{"checked-value":1,"unchecked-value":"2",onChange:n=>x(n,t.id),"default-checked":t.status==1},null,8,["onChange","default-checked"])]),operationBeforeExtend:i(({record:t})=>[t.type==="M"&&!M(_)?S((c(),y(I,{key:0,onClick:n=>w(t.id)},{default:i(()=>[o(D),N(" 新增")]),_:2},1032,["onClick"])),[[C,["system:menu:save"]]]):h("",!0)]),_:1},8,["options","columns"])])}}}),H=T(E,[["__scopeId","data-v-5f5e5954"]]);export{H as default};
